<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>网易云数据分析实战 | Lovers 的博客</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="icon" href="/lzmblog/lzmblog/favicon.ico">
    <link rel="stylesheet" href="/lzmblog/style.css">
    <meta name="description" content="个人博客">
    <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
    
    <link rel="preload" href="/lzmblog/assets/css/0.styles.34e16441.css" as="style"><link rel="preload" href="/lzmblog/assets/js/app.f6582fa6.js" as="script"><link rel="preload" href="/lzmblog/assets/js/7.f579b280.js" as="script"><link rel="preload" href="/lzmblog/assets/js/29.a4a5406a.js" as="script"><link rel="prefetch" href="/lzmblog/assets/js/10.7063497e.js"><link rel="prefetch" href="/lzmblog/assets/js/11.c077aed5.js"><link rel="prefetch" href="/lzmblog/assets/js/12.3dc9bdbf.js"><link rel="prefetch" href="/lzmblog/assets/js/13.8c8bc62d.js"><link rel="prefetch" href="/lzmblog/assets/js/14.158e06d6.js"><link rel="prefetch" href="/lzmblog/assets/js/15.5cfac5ee.js"><link rel="prefetch" href="/lzmblog/assets/js/16.87fbfa73.js"><link rel="prefetch" href="/lzmblog/assets/js/17.7c036072.js"><link rel="prefetch" href="/lzmblog/assets/js/18.82e55eab.js"><link rel="prefetch" href="/lzmblog/assets/js/19.9dff5288.js"><link rel="prefetch" href="/lzmblog/assets/js/2.672cc620.js"><link rel="prefetch" href="/lzmblog/assets/js/20.a3f1c967.js"><link rel="prefetch" href="/lzmblog/assets/js/21.3ff5f263.js"><link rel="prefetch" href="/lzmblog/assets/js/22.89c469f1.js"><link rel="prefetch" href="/lzmblog/assets/js/23.38743dcf.js"><link rel="prefetch" href="/lzmblog/assets/js/24.6bcac6e8.js"><link rel="prefetch" href="/lzmblog/assets/js/25.28974017.js"><link rel="prefetch" href="/lzmblog/assets/js/26.d9e15335.js"><link rel="prefetch" href="/lzmblog/assets/js/27.8a39c8f2.js"><link rel="prefetch" href="/lzmblog/assets/js/28.a01661e8.js"><link rel="prefetch" href="/lzmblog/assets/js/3.0e874f07.js"><link rel="prefetch" href="/lzmblog/assets/js/30.355f61f5.js"><link rel="prefetch" href="/lzmblog/assets/js/31.4e589136.js"><link rel="prefetch" href="/lzmblog/assets/js/32.0a74b181.js"><link rel="prefetch" href="/lzmblog/assets/js/33.1f0a784e.js"><link rel="prefetch" href="/lzmblog/assets/js/34.13798fc1.js"><link rel="prefetch" href="/lzmblog/assets/js/35.ce17e3ed.js"><link rel="prefetch" href="/lzmblog/assets/js/36.bafc423d.js"><link rel="prefetch" href="/lzmblog/assets/js/37.25f39385.js"><link rel="prefetch" href="/lzmblog/assets/js/38.c4bf83e1.js"><link rel="prefetch" href="/lzmblog/assets/js/39.1c904ce9.js"><link rel="prefetch" href="/lzmblog/assets/js/4.393c1c4d.js"><link rel="prefetch" href="/lzmblog/assets/js/5.f28696c6.js"><link rel="prefetch" href="/lzmblog/assets/js/6.22e81d8d.js"><link rel="prefetch" href="/lzmblog/assets/js/8.bfecf23e.js"><link rel="prefetch" href="/lzmblog/assets/js/9.3b6d93a9.js">
    <link rel="stylesheet" href="/lzmblog/assets/css/0.styles.34e16441.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div id="global-layout" data-v-7f2e4136><header class="header-container" style="background-size:cover;background-repeat:no-repeat;background-position:center;background-attachment:scroll;background-image:url(/lzmblog/post-bg.jpeg);" data-v-93921ff8 data-v-7f2e4136><nav class="navbar" style="position:absolute;opacity:1;transition:all 0.5s ease-in-out;" data-v-93921ff8><a href="/lzmblog/" class="navbar-link router-link-active">
    Lovers Blog
  </a> <ul class="navbar-links"><li><a href="/lzmblog/" class="router-link-active">
        HOME
      </a></li><li><a href="/lzmblog/about/">
        ABOUT
      </a></li><li><a href="/lzmblog/tags/">
        TAGS
      </a></li></ul> <div id="nav-icon"><span></span><span></span><span></span></div></nav> <div class="header-title" data-v-93921ff8 data-v-93921ff8><h1 data-v-93921ff8>网易云数据分析实战</h1> <p data-v-93921ff8></p></div></header> <div class="container" data-v-b3fda33c data-v-7f2e4136><main class="main" style="width:60%;" data-v-b3fda33c><div class="post" data-v-b3fda33c data-v-b3fda33c><article class="main-div"><div class="post-content content content__default"><h2 id="网易云数据分析"><a href="#网易云数据分析" class="header-anchor">#</a> 网易云数据分析</h2> <p>字段：title,tag,text,collection,play,songs,comments</p> <h3 id="导入模块-读取数据"><a href="#导入模块-读取数据" class="header-anchor">#</a> 导入模块，读取数据</h3> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">import</span> pandas <span class="token keyword">as</span> pd
<span class="token keyword">import</span> numpy <span class="token keyword">as</span> np
<span class="token keyword">import</span> matplotlib<span class="token punctuation">.</span>pyplot <span class="token keyword">as</span> plt
<span class="token keyword">import</span> squarify
</code></pre></div><div class="language-python extra-class"><pre class="language-python"><code>df <span class="token operator">=</span> pd<span class="token punctuation">.</span>read_excel<span class="token punctuation">(</span><span class="token string">'D:/Pandas/music_message.xlsx'</span><span class="token punctuation">,</span>header<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span>names<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">'title'</span><span class="token punctuation">,</span><span class="token string">'tag'</span><span class="token punctuation">,</span><span class="token string">'text'</span><span class="token punctuation">,</span><span class="token string">'collection'</span><span class="token punctuation">,</span><span class="token string">'play'</span><span class="token punctuation">,</span><span class="token string">'songs'</span><span class="token punctuation">,</span><span class="token string">'comments'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
df<span class="token punctuation">.</span>head<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><div><style scoped="scoped">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }
&lt;!--beforebegin--&gt;&lt;div class=&quot;language- extra-class&quot;&gt;&lt;!--afterbegin--&gt;&lt;pre&gt;&lt;code&gt;.dataframe tbody tr th {
    vertical-align: top;
}

.dataframe thead th {
    text-align: right;
}
&lt;/code&gt;&lt;/pre&gt;
&lt;!--beforeend--&gt;&lt;/div&gt;&lt;!--afterend--&gt;</style> <table border="1" class="dataframe"><thead><tr style="text-align:right;"><th></th> <th>title</th> <th>tag</th> <th>text</th> <th>collection</th> <th>play</th> <th>songs</th> <th>comments</th></tr></thead> <tbody><tr><th>0</th> <td>梦想无处安放的日子 也要时常拿出来晾晒</td> <td>华语-治愈-感动</td> <td>介绍：和过去的时光，聊一聊 用文字记下的回忆和许下的心愿，如今正裹挟着时光的风霜，与你撞个满...</td> <td>824</td> <td>339509</td> <td>30</td> <td>8</td></tr> <tr><th>1</th> <td>治愈说唱 I 越过黑暗的那道光</td> <td>华语-说唱-治愈</td> <td>介绍：今天，你又是为何戴上耳机？才发现，音乐真的是有力量的，治愈的力量。愿你有好运气，如果没...</td> <td>2657</td> <td>387541</td> <td>42</td> <td>12</td></tr> <tr><th>2</th> <td>《姐姐的爱乐之程》云南站路演</td> <td>华语-流行-综艺</td> <td>介绍：一个热爱音乐的纯朴村寨，一颗生长在茶山上的苍天大树，一轮雨后艳丽的彩虹，一段闲适的时光...</td> <td>1175</td> <td>204799</td> <td>8</td> <td>31</td></tr> <tr><th>3</th> <td>你搜不到的土嗨神曲</td> <td>欧美-摇滚-流行</td> <td>介绍：【不喜勿喷，自用歌单+村民推荐】这歌单容易嗨上头，如果你开车/走路请注意安全！现在很多...</td> <td>167万</td> <td>97074200</td> <td>212</td> <td>3972</td></tr> <tr><th>4</th> <td>是你的垚/刘大壮/王小帅/王泽科</td> <td>华语-伤感-翻唱</td> <td>介绍：喜欢歌单的可以点个关注哟歌单制作：小攀哟歌单创建：2020.4.1歌单修改：2020....</td> <td>12万</td> <td>7869796</td> <td>115</td> <td>280</td></tr></tbody></table></div> <div class="language-python extra-class"><pre class="language-python"><code>df<span class="token punctuation">.</span>info<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><div class="language- extra-class"><pre><code>&lt;class 'pandas.core.frame.DataFrame'&gt;
RangeIndex: 1289 entries, 0 to 1288
Data columns (total 7 columns):
 #   Column      Non-Null Count  Dtype 
---  ------      --------------  ----- 
 0   title       1289 non-null   object
 1   tag         1289 non-null   object
 2   text        1289 non-null   object
 3   collection  1289 non-null   object
 4   play        1289 non-null   int64 
 5   songs       1289 non-null   int64 
 6   comments    1289 non-null   object
dtypes: int64(2), object(5)
memory usage: 70.6+ KB
</code></pre></div><h3 id="数据处理、清洗"><a href="#数据处理、清洗" class="header-anchor">#</a> 数据处理、清洗</h3> <div class="language-python extra-class"><pre class="language-python"><code>df<span class="token punctuation">[</span><span class="token string">'collection'</span><span class="token punctuation">]</span> <span class="token operator">=</span> df<span class="token punctuation">[</span><span class="token string">'collection'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>astype<span class="token punctuation">(</span><span class="token string">'string'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token builtin">str</span><span class="token punctuation">.</span>strip<span class="token punctuation">(</span><span class="token punctuation">)</span>
df<span class="token punctuation">[</span><span class="token string">'collection'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">(</span><span class="token builtin">str</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">.</span>replace<span class="token punctuation">(</span><span class="token string">'万'</span><span class="token punctuation">,</span><span class="token string">'0000'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">for</span> i <span class="token keyword">in</span> df<span class="token punctuation">[</span><span class="token string">'collection'</span><span class="token punctuation">]</span><span class="token punctuation">]</span>
df<span class="token punctuation">[</span><span class="token string">'text'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token builtin">str</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">:</span><span class="token punctuation">]</span> <span class="token keyword">for</span> i <span class="token keyword">in</span> df<span class="token punctuation">[</span><span class="token string">'text'</span><span class="token punctuation">]</span><span class="token punctuation">]</span>
df<span class="token punctuation">[</span><span class="token string">'comments'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">0</span> <span class="token keyword">if</span> <span class="token string">'评论'</span> <span class="token keyword">in</span> <span class="token builtin">str</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">.</span>strip<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">else</span> <span class="token builtin">int</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span> <span class="token keyword">for</span> i <span class="token keyword">in</span> df<span class="token punctuation">[</span><span class="token string">'comments'</span><span class="token punctuation">]</span><span class="token punctuation">]</span>
</code></pre></div><div class="language-python extra-class"><pre class="language-python"><code>df<span class="token punctuation">.</span>info<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><div class="language- extra-class"><pre><code>&lt;class 'pandas.core.frame.DataFrame'&gt;
RangeIndex: 1289 entries, 0 to 1288
Data columns (total 7 columns):
 #   Column      Non-Null Count  Dtype 
---  ------      --------------  ----- 
 0   title       1289 non-null   object
 1   tag         1289 non-null   object
 2   text        1289 non-null   object
 3   collection  1289 non-null   int64 
 4   play        1289 non-null   int64 
 5   songs       1289 non-null   int64 
 6   comments    1289 non-null   int64 
dtypes: int64(4), object(3)
memory usage: 70.6+ KB
</code></pre></div><div class="language-python extra-class"><pre class="language-python"><code>df<span class="token punctuation">.</span>shape
</code></pre></div><div class="language- extra-class"><pre><code>(1289, 7)
</code></pre></div><h3 id="数据预览"><a href="#数据预览" class="header-anchor">#</a> 数据预览</h3> <div class="language-python extra-class"><pre class="language-python"><code>df<span class="token punctuation">.</span>head<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><div><style scoped="scoped">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }
&lt;!--beforebegin--&gt;&lt;div class=&quot;language- extra-class&quot;&gt;&lt;!--afterbegin--&gt;&lt;pre&gt;&lt;code&gt;.dataframe tbody tr th {
    vertical-align: top;
}

.dataframe thead th {
    text-align: right;
}
&lt;/code&gt;&lt;/pre&gt;
&lt;!--beforeend--&gt;&lt;/div&gt;&lt;!--afterend--&gt;</style> <table border="1" class="dataframe"><thead><tr style="text-align:right;"><th></th> <th>title</th> <th>tag</th> <th>text</th> <th>collection</th> <th>play</th> <th>songs</th> <th>comments</th></tr></thead> <tbody><tr><th>0</th> <td>梦想无处安放的日子 也要时常拿出来晾晒</td> <td>华语-治愈-感动</td> <td>和过去的时光，聊一聊 用文字记下的回忆和许下的心愿，如今正裹挟着时光的风霜，与你撞个满怀。那...</td> <td>824</td> <td>339509</td> <td>30</td> <td>8</td></tr> <tr><th>1</th> <td>治愈说唱 I 越过黑暗的那道光</td> <td>华语-说唱-治愈</td> <td>今天，你又是为何戴上耳机？才发现，音乐真的是有力量的，治愈的力量。愿你有好运气，如果没有，愿...</td> <td>2657</td> <td>387541</td> <td>42</td> <td>12</td></tr> <tr><th>2</th> <td>《姐姐的爱乐之程》云南站路演</td> <td>华语-流行-综艺</td> <td>一个热爱音乐的纯朴村寨，一颗生长在茶山上的苍天大树，一轮雨后艳丽的彩虹，一段闲适的时光。一场...</td> <td>1175</td> <td>204799</td> <td>8</td> <td>31</td></tr> <tr><th>3</th> <td>你搜不到的土嗨神曲</td> <td>欧美-摇滚-流行</td> <td>【不喜勿喷，自用歌单+村民推荐】这歌单容易嗨上头，如果你开车/走路请注意安全！现在很多年轻人...</td> <td>1670000</td> <td>97074200</td> <td>212</td> <td>3972</td></tr> <tr><th>4</th> <td>是你的垚/刘大壮/王小帅/王泽科</td> <td>华语-伤感-翻唱</td> <td>喜欢歌单的可以点个关注哟歌单制作：小攀哟歌单创建：2020.4.1歌单修改：2020.9.1...</td> <td>120000</td> <td>7869796</td> <td>115</td> <td>280</td></tr></tbody></table></div> <h3 id="构建通用函数-简化代码"><a href="#构建通用函数-简化代码" class="header-anchor">#</a> 构建通用函数，简化代码</h3> <p>get_matplot(x,y,chart,title,ha,size,color)
x表示充当x轴数据；
y表示充当y轴数据；
chart表示图标类型，这里分为三种barh、hist、squarify.plot；
ha表示文本相对朝向；
size表示字体大小；
color表示图表颜色；</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token comment">#构建函数</span>
<span class="token keyword">def</span> <span class="token function">get_matplot</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span>y<span class="token punctuation">,</span>chart<span class="token punctuation">,</span>title<span class="token punctuation">,</span>ha<span class="token punctuation">,</span>size<span class="token punctuation">,</span>color<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token comment"># 设置图片显示属性,字体及大小</span>
    plt<span class="token punctuation">.</span>rcParams<span class="token punctuation">[</span><span class="token string">'font.sans-serif'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'Microsoft YaHei'</span><span class="token punctuation">]</span>
    plt<span class="token punctuation">.</span>rcParams<span class="token punctuation">[</span><span class="token string">'font.size'</span><span class="token punctuation">]</span> <span class="token operator">=</span> size
    plt<span class="token punctuation">.</span>rcParams<span class="token punctuation">[</span><span class="token string">'axes.unicode_minus'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">False</span>
    <span class="token comment"># 设置图片显示属性</span>
    fig <span class="token operator">=</span> plt<span class="token punctuation">.</span>figure<span class="token punctuation">(</span>figsize<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">16</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">,</span> dpi<span class="token operator">=</span><span class="token number">80</span><span class="token punctuation">)</span>
    ax <span class="token operator">=</span> plt<span class="token punctuation">.</span>subplot<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>
    ax<span class="token punctuation">.</span>patch<span class="token punctuation">.</span>set_color<span class="token punctuation">(</span><span class="token string">'white'</span><span class="token punctuation">)</span>
    <span class="token comment"># 设置坐标轴属性</span>
    lines <span class="token operator">=</span> plt<span class="token punctuation">.</span>gca<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token comment"># 设置显示数据</span>
    <span class="token keyword">if</span> x <span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">:</span>
        <span class="token keyword">pass</span>
    <span class="token keyword">else</span><span class="token punctuation">:</span>
        x<span class="token punctuation">.</span>reverse<span class="token punctuation">(</span><span class="token punctuation">)</span>
        y<span class="token punctuation">.</span>reverse<span class="token punctuation">(</span><span class="token punctuation">)</span>
        data <span class="token operator">=</span> pd<span class="token punctuation">.</span>Series<span class="token punctuation">(</span>y<span class="token punctuation">,</span> index<span class="token operator">=</span>x<span class="token punctuation">)</span>
    <span class="token comment"># 设置坐标轴颜色</span>
    lines<span class="token punctuation">.</span>spines<span class="token punctuation">[</span><span class="token string">'right'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>set_color<span class="token punctuation">(</span><span class="token string">'none'</span><span class="token punctuation">)</span>
    lines<span class="token punctuation">.</span>spines<span class="token punctuation">[</span><span class="token string">'top'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>set_color<span class="token punctuation">(</span><span class="token string">'none'</span><span class="token punctuation">)</span>
    lines<span class="token punctuation">.</span>spines<span class="token punctuation">[</span><span class="token string">'left'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>set_color<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token number">64</span><span class="token operator">/</span><span class="token number">255</span><span class="token punctuation">,</span> <span class="token number">64</span><span class="token operator">/</span><span class="token number">255</span><span class="token punctuation">,</span> <span class="token number">64</span><span class="token operator">/</span><span class="token number">255</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    lines<span class="token punctuation">.</span>spines<span class="token punctuation">[</span><span class="token string">'bottom'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>set_color<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token number">64</span><span class="token operator">/</span><span class="token number">255</span><span class="token punctuation">,</span> <span class="token number">64</span><span class="token operator">/</span><span class="token number">255</span><span class="token punctuation">,</span> <span class="token number">64</span><span class="token operator">/</span><span class="token number">255</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token comment"># 设置坐标轴刻度</span>
    lines<span class="token punctuation">.</span>xaxis<span class="token punctuation">.</span>set_ticks_position<span class="token punctuation">(</span><span class="token string">'none'</span><span class="token punctuation">)</span>
    lines<span class="token punctuation">.</span>yaxis<span class="token punctuation">.</span>set_ticks_position<span class="token punctuation">(</span><span class="token string">'none'</span><span class="token punctuation">)</span>
    <span class="token keyword">if</span> chart <span class="token operator">==</span> <span class="token string">'barh'</span><span class="token punctuation">:</span>
        <span class="token comment"># 绘制柱状图,设置柱状图颜色</span>
        data<span class="token punctuation">.</span>plot<span class="token punctuation">.</span>barh<span class="token punctuation">(</span>ax<span class="token operator">=</span>ax<span class="token punctuation">,</span> width<span class="token operator">=</span><span class="token number">0.7</span><span class="token punctuation">,</span> alpha<span class="token operator">=</span><span class="token number">0.7</span><span class="token punctuation">,</span> color<span class="token operator">=</span>color<span class="token punctuation">)</span>
        <span class="token comment"># 添加标题,设置字体大小</span>
        ax<span class="token punctuation">.</span>set_title<span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f'</span><span class="token interpolation"><span class="token punctuation">{</span>title<span class="token punctuation">}</span></span><span class="token string">'</span></span><span class="token punctuation">,</span> fontsize<span class="token operator">=</span><span class="token number">18</span><span class="token punctuation">,</span> fontweight<span class="token operator">=</span><span class="token string">'light'</span><span class="token punctuation">)</span>
        <span class="token comment"># 添加歌曲出现次数文本</span>
        <span class="token keyword">for</span> x<span class="token punctuation">,</span> y <span class="token keyword">in</span> <span class="token builtin">enumerate</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span>values<span class="token punctuation">)</span><span class="token punctuation">:</span>
            plt<span class="token punctuation">.</span>text<span class="token punctuation">(</span>y<span class="token operator">+</span><span class="token number">0.3</span><span class="token punctuation">,</span> x<span class="token operator">-</span><span class="token number">0.12</span><span class="token punctuation">,</span> <span class="token string">'%s'</span> <span class="token operator">%</span> y<span class="token punctuation">,</span> ha<span class="token operator">=</span><span class="token string-interpolation"><span class="token string">f'</span><span class="token interpolation"><span class="token punctuation">{</span>ha<span class="token punctuation">}</span></span><span class="token string">'</span></span><span class="token punctuation">)</span>
    <span class="token keyword">elif</span> chart <span class="token operator">==</span> <span class="token string">'hist'</span><span class="token punctuation">:</span>
        <span class="token comment"># 绘制直方图,设置柱状图颜色</span>
        ax<span class="token punctuation">.</span>hist<span class="token punctuation">(</span>y<span class="token punctuation">,</span> bins<span class="token operator">=</span><span class="token number">30</span><span class="token punctuation">,</span> alpha<span class="token operator">=</span><span class="token number">0.7</span><span class="token punctuation">,</span> color<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">21</span><span class="token operator">/</span><span class="token number">255</span><span class="token punctuation">,</span> <span class="token number">47</span><span class="token operator">/</span><span class="token number">255</span><span class="token punctuation">,</span> <span class="token number">71</span><span class="token operator">/</span><span class="token number">255</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token comment"># 添加标题,设置字体大小</span>
        ax<span class="token punctuation">.</span>set_title<span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f'</span><span class="token interpolation"><span class="token punctuation">{</span>title<span class="token punctuation">}</span></span><span class="token string">'</span></span><span class="token punctuation">,</span> fontsize<span class="token operator">=</span><span class="token number">18</span><span class="token punctuation">,</span> fontweight<span class="token operator">=</span><span class="token string">'light'</span><span class="token punctuation">)</span>
    <span class="token keyword">elif</span> chart <span class="token operator">==</span> <span class="token string">'plot'</span><span class="token punctuation">:</span>
        colors <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'#adb0ff'</span><span class="token punctuation">,</span> <span class="token string">'#ffb3ff'</span><span class="token punctuation">,</span> <span class="token string">'#90d595'</span><span class="token punctuation">,</span> <span class="token string">'#e48381'</span><span class="token punctuation">,</span> <span class="token string">'#aafbff'</span><span class="token punctuation">,</span> <span class="token string">'#f7bb5f'</span><span class="token punctuation">,</span> <span class="token string">'#eafb50'</span><span class="token punctuation">,</span> 
         <span class="token string">'#adb0ff'</span><span class="token punctuation">,</span> <span class="token string">'#ffb3ff'</span><span class="token punctuation">,</span> <span class="token string">'#90d595'</span><span class="token punctuation">,</span> <span class="token string">'#e48381'</span><span class="token punctuation">,</span> <span class="token string">'#aafbff'</span><span class="token punctuation">,</span> <span class="token string">'#f7bb5f'</span><span class="token punctuation">,</span> <span class="token string">'#eafb50'</span><span class="token punctuation">,</span>
         <span class="token string">'#adb0ff'</span><span class="token punctuation">,</span> <span class="token string">'#ffb3ff'</span><span class="token punctuation">,</span> <span class="token string">'#90d595'</span><span class="token punctuation">,</span> <span class="token string">'#e48381'</span><span class="token punctuation">,</span> <span class="token string">'#aafbff'</span><span class="token punctuation">,</span> <span class="token string">'#f7bb5f'</span><span class="token punctuation">,</span> <span class="token string">'#eafb50'</span><span class="token punctuation">,</span>
         <span class="token string">'#adb0ff'</span><span class="token punctuation">,</span> <span class="token string">'#ffb3ff'</span><span class="token punctuation">,</span> <span class="token string">'#90d595'</span><span class="token punctuation">,</span> <span class="token string">'#e48381'</span><span class="token punctuation">,</span> <span class="token string">'#aafbff'</span><span class="token punctuation">,</span> <span class="token string">'#f7bb5f'</span><span class="token punctuation">,</span> <span class="token string">'#eafb50'</span><span class="token punctuation">,</span>
         <span class="token string">'#adb0ff'</span><span class="token punctuation">,</span> <span class="token string">'#ffb3ff'</span><span class="token punctuation">,</span> <span class="token string">'#90d595'</span><span class="token punctuation">,</span> <span class="token string">'#e48381'</span><span class="token punctuation">,</span> <span class="token string">'#aafbff'</span><span class="token punctuation">,</span> <span class="token string">'#f7bb5f'</span><span class="token punctuation">,</span> <span class="token string">'#eafb50'</span><span class="token punctuation">,</span>
          <span class="token string">'#adb0ff'</span><span class="token punctuation">,</span> <span class="token string">'#ffb3ff'</span><span class="token punctuation">,</span> <span class="token string">'#90d595'</span><span class="token punctuation">,</span> <span class="token string">'#e48381'</span><span class="token punctuation">,</span> <span class="token string">'#aafbff'</span><span class="token punctuation">,</span> <span class="token string">'#f7bb5f'</span><span class="token punctuation">,</span> <span class="token string">'#eafb50'</span><span class="token punctuation">,</span>
          <span class="token string">'#adb0ff'</span><span class="token punctuation">,</span> <span class="token string">'#ffb3ff'</span><span class="token punctuation">,</span> <span class="token string">'#90d595'</span><span class="token punctuation">,</span> <span class="token string">'#e48381'</span><span class="token punctuation">,</span> <span class="token string">'#aafbff'</span><span class="token punctuation">]</span>
        plot <span class="token operator">=</span> squarify<span class="token punctuation">.</span>plot<span class="token punctuation">(</span>sizes<span class="token operator">=</span>y<span class="token punctuation">,</span> label<span class="token operator">=</span>x<span class="token punctuation">,</span> color<span class="token operator">=</span>colors<span class="token punctuation">,</span> alpha<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">,</span> value<span class="token operator">=</span>y<span class="token punctuation">,</span> edgecolor<span class="token operator">=</span><span class="token string">'white'</span><span class="token punctuation">,</span> linewidth<span class="token operator">=</span><span class="token number">1.5</span><span class="token punctuation">)</span>
        <span class="token comment"># 设置标签大小为1</span>
        plt<span class="token punctuation">.</span>rc<span class="token punctuation">(</span><span class="token string">'font'</span><span class="token punctuation">,</span> size<span class="token operator">=</span><span class="token number">6</span><span class="token punctuation">)</span>
        <span class="token comment"># 设置标题大小</span>
        plot<span class="token punctuation">.</span>set_title<span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f'</span><span class="token interpolation"><span class="token punctuation">{</span>title<span class="token punctuation">}</span></span><span class="token string">'</span></span><span class="token punctuation">,</span> fontsize<span class="token operator">=</span><span class="token number">13</span><span class="token punctuation">,</span> fontweight<span class="token operator">=</span><span class="token string">'light'</span><span class="token punctuation">)</span>
        <span class="token comment"># 除坐标轴</span>
        plt<span class="token punctuation">.</span>axis<span class="token punctuation">(</span><span class="token string">'off'</span><span class="token punctuation">)</span>
        <span class="token comment"># 除上边框和右边框刻度</span>
        plt<span class="token punctuation">.</span>tick_params<span class="token punctuation">(</span>top<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">,</span> right<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span>
    <span class="token comment"># 显示图片</span>
    plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><div class="language-python extra-class"><pre class="language-python"><code><span class="token comment">#构建color序列</span>
color <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token number">153</span><span class="token operator">/</span><span class="token number">255</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token operator">/</span><span class="token number">255</span><span class="token punctuation">,</span> <span class="token number">102</span><span class="token operator">/</span><span class="token number">255</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token operator">/</span><span class="token number">255</span><span class="token punctuation">,</span> <span class="token number">88</span><span class="token operator">/</span><span class="token number">255</span><span class="token punctuation">,</span> <span class="token number">121</span><span class="token operator">/</span><span class="token number">255</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">160</span><span class="token operator">/</span><span class="token number">255</span><span class="token punctuation">,</span> <span class="token number">102</span><span class="token operator">/</span><span class="token number">255</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token operator">/</span><span class="token number">255</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">136</span><span class="token operator">/</span><span class="token number">255</span><span class="token punctuation">,</span> <span class="token number">43</span><span class="token operator">/</span><span class="token number">255</span><span class="token punctuation">,</span> <span class="token number">48</span><span class="token operator">/</span><span class="token number">255</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">16</span><span class="token operator">/</span><span class="token number">255</span><span class="token punctuation">,</span> <span class="token number">152</span><span class="token operator">/</span><span class="token number">255</span><span class="token punctuation">,</span> <span class="token number">168</span><span class="token operator">/</span><span class="token number">255</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">153</span><span class="token operator">/</span><span class="token number">255</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token operator">/</span><span class="token number">255</span><span class="token punctuation">,</span> <span class="token number">102</span><span class="token operator">/</span><span class="token number">255</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
</code></pre></div><h3 id="_1-歌单播放量top10"><a href="#_1-歌单播放量top10" class="header-anchor">#</a> 1.歌单播放量Top10</h3> <div class="language-python extra-class"><pre class="language-python"><code>df_play <span class="token operator">=</span> df<span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token string">'title'</span><span class="token punctuation">,</span><span class="token string">'play'</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">.</span>sort_values<span class="token punctuation">(</span><span class="token string">'play'</span><span class="token punctuation">,</span>ascending<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span>
df_play<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token number">10</span><span class="token punctuation">]</span>
</code></pre></div><div><style scoped="scoped">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }
&lt;!--beforebegin--&gt;&lt;div class=&quot;language- extra-class&quot;&gt;&lt;!--afterbegin--&gt;&lt;pre&gt;&lt;code&gt;.dataframe tbody tr th {
    vertical-align: top;
}

.dataframe thead th {
    text-align: right;
}
&lt;/code&gt;&lt;/pre&gt;
&lt;!--beforeend--&gt;&lt;/div&gt;&lt;!--afterend--&gt;</style> <table border="1" class="dataframe"><thead><tr style="text-align:right;"><th></th> <th>title</th> <th>play</th></tr></thead> <tbody><tr><th>40</th> <td>精选 | 网络热歌分享</td> <td>502522656</td></tr> <tr><th>178</th> <td>那些好听到爆了的歌</td> <td>135485104</td></tr> <tr><th>182</th> <td>精选｜耳熟的翻唱合集</td> <td>121409168</td></tr> <tr><th>3</th> <td>你搜不到的土嗨神曲</td> <td>97074200</td></tr> <tr><th>97</th> <td>你会爱上这个流行华语歌单</td> <td>69498312</td></tr> <tr><th>384</th> <td>超好听的高潮翻唱呀</td> <td>66282664</td></tr> <tr><th>158</th> <td>精选｜Cover的那些循环歌曲</td> <td>66277840</td></tr> <tr><th>263</th> <td>「翻唱」好听的歌永远没有完整版。</td> <td>55291720</td></tr> <tr><th>188</th> <td>网络热播的那些神仙声音（持续更新）</td> <td>48534648</td></tr> <tr><th>19</th> <td>精选｜Cover翻唱百听不腻</td> <td>36318572</td></tr></tbody></table></div> <div class="language-python extra-class"><pre class="language-python"><code>df_play <span class="token operator">=</span> df_play<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token number">10</span><span class="token punctuation">]</span>
_x <span class="token operator">=</span> df_play<span class="token punctuation">[</span><span class="token string">'title'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>tolist<span class="token punctuation">(</span><span class="token punctuation">)</span>
_y <span class="token operator">=</span> df_play<span class="token punctuation">[</span><span class="token string">'play'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>tolist<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><div class="language-python extra-class"><pre class="language-python"><code>df_play <span class="token operator">=</span> get_matplot<span class="token punctuation">(</span>x<span class="token operator">=</span>_x<span class="token punctuation">,</span>y<span class="token operator">=</span>_y<span class="token punctuation">,</span>chart<span class="token operator">=</span><span class="token string">'barh'</span><span class="token punctuation">,</span>title<span class="token operator">=</span><span class="token string">'网易云音乐华语歌单播放 TOP10'</span><span class="token punctuation">,</span>ha<span class="token operator">=</span><span class="token string">'left'</span><span class="token punctuation">,</span>size<span class="token operator">=</span><span class="token number">8</span><span class="token punctuation">,</span>color<span class="token operator">=</span>color<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
df_play
</code></pre></div><p><img src="https://img-blog.csdnimg.cn/img_convert/215f2901dc9d841fb5fab04ccf5bd009.png#pic_center" alt="在这里插入图片描述"></p> <h3 id="_2-歌单收藏量top10"><a href="#_2-歌单收藏量top10" class="header-anchor">#</a> 2.歌单收藏量Top10</h3> <div class="language-python extra-class"><pre class="language-python"><code>df_col <span class="token operator">=</span> df<span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token string">'title'</span><span class="token punctuation">,</span><span class="token string">'collection'</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">.</span>sort_values<span class="token punctuation">(</span><span class="token string">'collection'</span><span class="token punctuation">,</span>ascending<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span>
df_col<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token number">10</span><span class="token punctuation">]</span>
</code></pre></div><div><style scoped="scoped">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }
&lt;!--beforebegin--&gt;&lt;div class=&quot;language- extra-class&quot;&gt;&lt;!--afterbegin--&gt;&lt;pre&gt;&lt;code&gt;.dataframe tbody tr th {
    vertical-align: top;
}

.dataframe thead th {
    text-align: right;
}
&lt;/code&gt;&lt;/pre&gt;
&lt;!--beforeend--&gt;&lt;/div&gt;&lt;!--afterend--&gt;</style> <table border="1" class="dataframe"><thead><tr style="text-align:right;"><th></th> <th>title</th> <th>collection</th></tr></thead> <tbody><tr><th>40</th> <td>精选 | 网络热歌分享</td> <td>5460000</td></tr> <tr><th>3</th> <td>你搜不到的土嗨神曲</td> <td>1670000</td></tr> <tr><th>178</th> <td>那些好听到爆了的歌</td> <td>1430000</td></tr> <tr><th>182</th> <td>精选｜耳熟的翻唱合集</td> <td>1380000</td></tr> <tr><th>384</th> <td>超好听的高潮翻唱呀</td> <td>810000</td></tr> <tr><th>158</th> <td>精选｜Cover的那些循环歌曲</td> <td>740000</td></tr> <tr><th>263</th> <td>「翻唱」好听的歌永远没有完整版。</td> <td>690000</td></tr> <tr><th>97</th> <td>你会爱上这个流行华语歌单</td> <td>680000</td></tr> <tr><th>188</th> <td>网络热播的那些神仙声音（持续更新）</td> <td>490000</td></tr> <tr><th>19</th> <td>精选｜Cover翻唱百听不腻</td> <td>430000</td></tr></tbody></table></div> <div class="language-python extra-class"><pre class="language-python"><code>df_col <span class="token operator">=</span> df_col<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token number">10</span><span class="token punctuation">]</span>
_x <span class="token operator">=</span> df_col<span class="token punctuation">[</span><span class="token string">'title'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>tolist<span class="token punctuation">(</span><span class="token punctuation">)</span>
_y <span class="token operator">=</span> df_col<span class="token punctuation">[</span><span class="token string">'collection'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>tolist<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><div class="language-python extra-class"><pre class="language-python"><code>df_col <span class="token operator">=</span> get_matplot<span class="token punctuation">(</span>x<span class="token operator">=</span>_x<span class="token punctuation">,</span>y<span class="token operator">=</span>_y<span class="token punctuation">,</span>chart<span class="token operator">=</span><span class="token string">'barh'</span><span class="token punctuation">,</span>title<span class="token operator">=</span><span class="token string">'网易云音乐华语歌单收藏 TOP10'</span><span class="token punctuation">,</span>ha<span class="token operator">=</span><span class="token string">'left'</span><span class="token punctuation">,</span>size<span class="token operator">=</span><span class="token number">8</span><span class="token punctuation">,</span>color<span class="token operator">=</span>color<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
df_col
</code></pre></div><p><img src="https://img-blog.csdnimg.cn/img_convert/585d9abd60842248db1608dd1533d829.png#pic_center" alt="在这里插入图片描述"></p> <h3 id="_3-歌单评论数top10"><a href="#_3-歌单评论数top10" class="header-anchor">#</a> 3.歌单评论数Top10</h3> <div class="language-python extra-class"><pre class="language-python"><code>df_com <span class="token operator">=</span> df<span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token string">'title'</span><span class="token punctuation">,</span><span class="token string">'comments'</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">.</span>sort_values<span class="token punctuation">(</span><span class="token string">'comments'</span><span class="token punctuation">,</span>ascending<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span>
df_com<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token number">10</span><span class="token punctuation">]</span>
</code></pre></div><div><style scoped="scoped">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }
&lt;!--beforebegin--&gt;&lt;div class=&quot;language- extra-class&quot;&gt;&lt;!--afterbegin--&gt;&lt;pre&gt;&lt;code&gt;.dataframe tbody tr th {
    vertical-align: top;
}

.dataframe thead th {
    text-align: right;
}
&lt;/code&gt;&lt;/pre&gt;
&lt;!--beforeend--&gt;&lt;/div&gt;&lt;!--afterend--&gt;</style> <table border="1" class="dataframe"><thead><tr style="text-align:right;"><th></th> <th>title</th> <th>comments</th></tr></thead> <tbody><tr><th>40</th> <td>精选 | 网络热歌分享</td> <td>19159</td></tr> <tr><th>408</th> <td>献给用生命托起世界的英雄们</td> <td>11628</td></tr> <tr><th>202</th> <td>致敬黑暗里的光 感谢你们点亮夜空</td> <td>4700</td></tr> <tr><th>14</th> <td>篮球巨星科比，再见</td> <td>4097</td></tr> <tr><th>3</th> <td>你搜不到的土嗨神曲</td> <td>3972</td></tr> <tr><th>436</th> <td>【刷歌升级】60～70秒超短歌曲一万首</td> <td>3849</td></tr> <tr><th>349</th> <td>穿越千万时间线，只想见你</td> <td>3793</td></tr> <tr><th>1157</th> <td>【227大团结】美好的东西是不会死的</td> <td>3466</td></tr> <tr><th>144</th> <td>『中文说唱』 只想私藏的顶级国语Flow</td> <td>2843</td></tr> <tr><th>184</th> <td>摆地摊专用BGM，要的就是回头率！</td> <td>2822</td></tr></tbody></table></div> <div class="language-python extra-class"><pre class="language-python"><code>df_com <span class="token operator">=</span> df_com<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token number">10</span><span class="token punctuation">]</span>
_x <span class="token operator">=</span> df_com<span class="token punctuation">[</span><span class="token string">'title'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>tolist<span class="token punctuation">(</span><span class="token punctuation">)</span>
_y <span class="token operator">=</span> df_com<span class="token punctuation">[</span><span class="token string">'comments'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>tolist<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><div class="language-python extra-class"><pre class="language-python"><code>df_com <span class="token operator">=</span> get_matplot<span class="token punctuation">(</span>x<span class="token operator">=</span>_x<span class="token punctuation">,</span>y<span class="token operator">=</span>_y<span class="token punctuation">,</span>chart<span class="token operator">=</span><span class="token string">'barh'</span><span class="token punctuation">,</span>title<span class="token operator">=</span><span class="token string">'网易云音乐华语歌单评论数 TOP10'</span><span class="token punctuation">,</span>ha<span class="token operator">=</span><span class="token string">'left'</span><span class="token punctuation">,</span>size<span class="token operator">=</span><span class="token number">8</span><span class="token punctuation">,</span>color<span class="token operator">=</span>color<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
df_com
</code></pre></div><p><img src="https://img-blog.csdnimg.cn/img_convert/f6e9593da53024acb2c56dfcf63cfc94.png#pic_center" alt="在这里插入图片描述"></p> <h3 id="_4-歌单收藏数量分布情况"><a href="#_4-歌单收藏数量分布情况" class="header-anchor">#</a> 4.歌单收藏数量分布情况</h3> <div class="language-python extra-class"><pre class="language-python"><code>df_collection <span class="token operator">=</span> np<span class="token punctuation">.</span>log<span class="token punctuation">(</span>df<span class="token punctuation">[</span><span class="token string">'collection'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
df_collection
</code></pre></div><div class="language- extra-class"><pre><code>0        6.714171
1        7.884953
2        7.069023
3       14.328334
4       11.695247
          ...    
1284     4.304065
1285     2.708050
1286     3.970292
1287     6.238325
1288     4.787492
Name: collection, Length: 1289, dtype: float64
</code></pre></div><div class="language-python extra-class"><pre class="language-python"><code>df_collection <span class="token operator">=</span> get_matplot<span class="token punctuation">(</span>x<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span>y<span class="token operator">=</span>df_collection<span class="token punctuation">,</span>chart<span class="token operator">=</span><span class="token string">'hist'</span><span class="token punctuation">,</span>title<span class="token operator">=</span><span class="token string">'华语歌单收藏数量分布情况'</span><span class="token punctuation">,</span>ha<span class="token operator">=</span><span class="token string">'left'</span><span class="token punctuation">,</span>size<span class="token operator">=</span><span class="token number">10</span><span class="token punctuation">,</span>color<span class="token operator">=</span>color<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
df_collection
</code></pre></div><p><img src="https://img-blog.csdnimg.cn/img_convert/d48e791d12344115eae27254dd181c8a.png#pic_center" alt=""></p> <h3 id="_5-歌单标签图"><a href="#_5-歌单标签图" class="header-anchor">#</a> 5.歌单标签图</h3> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">def</span> <span class="token function">get_tag</span><span class="token punctuation">(</span>df<span class="token punctuation">)</span><span class="token punctuation">:</span>
    df <span class="token operator">=</span> df<span class="token punctuation">[</span><span class="token string">'tag'</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token builtin">str</span><span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token string">'-'</span><span class="token punctuation">)</span>
    datalist <span class="token operator">=</span> <span class="token builtin">list</span><span class="token punctuation">(</span><span class="token builtin">set</span><span class="token punctuation">(</span>x <span class="token keyword">for</span> data <span class="token keyword">in</span> df <span class="token keyword">for</span> x <span class="token keyword">in</span> data<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span>  datalist
df_tag <span class="token operator">=</span> get_tag<span class="token punctuation">(</span>df<span class="token punctuation">)</span>
<span class="token comment"># df_tag</span>
<span class="token keyword">def</span> <span class="token function">get_lx</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span>i<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">if</span> i <span class="token keyword">in</span> <span class="token builtin">str</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> <span class="token number">1</span>
    <span class="token keyword">else</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> <span class="token number">0</span>
<span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">list</span><span class="token punctuation">(</span>df_tag<span class="token punctuation">)</span><span class="token punctuation">:</span><span class="token comment">#这里的df['all_category'].unique()也可以自己用列表构建，我这里是利用了前面获得的</span>
    df<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> df<span class="token punctuation">[</span><span class="token string">'tag'</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token builtin">apply</span><span class="token punctuation">(</span>get_lx<span class="token punctuation">,</span>i<span class="token operator">=</span><span class="token string-interpolation"><span class="token string">f'</span><span class="token interpolation"><span class="token punctuation">{</span>i<span class="token punctuation">}</span></span><span class="token string">'</span></span><span class="token punctuation">)</span>
<span class="token comment"># df.head()</span>
Series <span class="token operator">=</span> df<span class="token punctuation">.</span>iloc<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">:</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token builtin">sum</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>sort_values<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span>ascending<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span>
df_tag <span class="token operator">=</span> <span class="token punctuation">[</span>tag <span class="token keyword">for</span> tag <span class="token keyword">in</span> <span class="token builtin">zip</span><span class="token punctuation">(</span>Series<span class="token punctuation">.</span>index<span class="token punctuation">.</span>tolist<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>Series<span class="token punctuation">.</span>values<span class="token punctuation">.</span>tolist<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
df_tag<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token number">10</span><span class="token punctuation">]</span>
</code></pre></div><div class="language- extra-class"><pre><code>[('华语', 1287),
 ('流行', 724),
 ('伤感', 177),
 ('说唱', 172),
 ('治愈', 162),
 ('翻唱', 96),
 ('浪漫', 96),
 ('民谣', 90),
 ('夜晚', 77),
 ('古风', 55)]
</code></pre></div><div class="language-python extra-class"><pre class="language-python"><code>df_iex <span class="token operator">=</span> <span class="token punctuation">[</span>index <span class="token keyword">for</span> index <span class="token keyword">in</span> Series<span class="token punctuation">.</span>index<span class="token punctuation">.</span>tolist<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token number">20</span><span class="token punctuation">]</span>
df_tag <span class="token operator">=</span> <span class="token punctuation">[</span>tag <span class="token keyword">for</span> tag <span class="token keyword">in</span> Series<span class="token punctuation">.</span>values<span class="token punctuation">.</span>tolist<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token number">20</span><span class="token punctuation">]</span>
</code></pre></div><div class="language-python extra-class"><pre class="language-python"><code>df_tagiex <span class="token operator">=</span> get_matplot<span class="token punctuation">(</span>x<span class="token operator">=</span>df_iex<span class="token punctuation">,</span>y<span class="token operator">=</span>df_tag<span class="token punctuation">,</span>chart<span class="token operator">=</span><span class="token string">'plot'</span><span class="token punctuation">,</span>title<span class="token operator">=</span><span class="token string">'网易云音乐华语歌单标签图'</span><span class="token punctuation">,</span>size<span class="token operator">=</span><span class="token number">10</span><span class="token punctuation">,</span>ha<span class="token operator">=</span><span class="token string">'center'</span><span class="token punctuation">,</span>color<span class="token operator">=</span>color<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
df_tagiex
</code></pre></div><p><img src="https://img-blog.csdnimg.cn/20201221210640416.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ0NzYwOTEy,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p> <h3 id="_6-歌单介绍词云图"><a href="#_6-歌单介绍词云图" class="header-anchor">#</a> 6.歌单介绍词云图</h3> <h4 id="词云图1"><a href="#词云图1" class="header-anchor">#</a> 词云图1</h4> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">import</span> stylecloud
<span class="token keyword">from</span> IPython<span class="token punctuation">.</span>display <span class="token keyword">import</span> Image
stylecloud<span class="token punctuation">.</span>gen_stylecloud<span class="token punctuation">(</span>text<span class="token operator">=</span><span class="token string">' '</span><span class="token punctuation">.</span>join<span class="token punctuation">(</span><span class="token builtin">list</span><span class="token punctuation">(</span>df<span class="token punctuation">.</span>text<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> collocations<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">,</span>
                          <span class="token comment">#palette='cartocolors.qualitative.Pastel_5',</span>
                          font_path<span class="token operator">=</span><span class="token string">r'‪C:/Windows/Fonts/msyh.ttc'</span><span class="token punctuation">,</span>
                          <span class="token comment">#icon_name='fas fa-dragon',</span>
                          icon_name<span class="token operator">=</span><span class="token string">'fas fa-music'</span><span class="token punctuation">,</span>
                          <span class="token comment">#icon_name='fas fa-cat',</span>
                          <span class="token comment">#icon_name='fas fa-dove',</span>
                          size<span class="token operator">=</span><span class="token number">400</span><span class="token punctuation">,</span>
                          output_name<span class="token operator">=</span><span class="token string">'music.png'</span><span class="token punctuation">)</span>
<span class="token comment">#已生成词云图片，这里展示一下</span>
Image<span class="token punctuation">(</span>filename<span class="token operator">=</span><span class="token string">'music.png'</span><span class="token punctuation">)</span>
</code></pre></div><p><img src="https://img-blog.csdnimg.cn/20201221210713843.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ0NzYwOTEy,size_16,color_FFFFFF,t_70" alt="[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-PVAJixSs-1608555402642)(wyy_files/wyy_37_0.png)]"></p> <h4 id="词云图2"><a href="#词云图2" class="header-anchor">#</a> 词云图2</h4> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">import</span> os  
<span class="token keyword">import</span> jieba
<span class="token keyword">from</span> pyecharts<span class="token punctuation">.</span>charts <span class="token keyword">import</span> Bar<span class="token punctuation">,</span> Pie<span class="token punctuation">,</span> Line<span class="token punctuation">,</span> WordCloud<span class="token punctuation">,</span> Page
<span class="token keyword">from</span> pyecharts <span class="token keyword">import</span> options <span class="token keyword">as</span> opts 
<span class="token keyword">from</span> pyecharts<span class="token punctuation">.</span><span class="token builtin">globals</span> <span class="token keyword">import</span> SymbolType<span class="token punctuation">,</span> WarningType
WarningType<span class="token punctuation">.</span>ShowWarning <span class="token operator">=</span> <span class="token boolean">False</span>

<span class="token keyword">import</span> stylecloud
<span class="token keyword">from</span> IPython<span class="token punctuation">.</span>display <span class="token keyword">import</span> Image <span class="token comment"># 用于在jupyter lab中显示本地图</span>

<span class="token keyword">def</span> <span class="token function">get_cut_words</span><span class="token punctuation">(</span>x_series<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token comment"># 读入停用词表</span>
    stop_words <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> 
    
    <span class="token keyword">with</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">r&quot;D:/Pandas/已学习/如何制作stylecloud词云？/stop_words.txt&quot;</span><span class="token punctuation">,</span> <span class="token string">'r'</span><span class="token punctuation">,</span> encoding<span class="token operator">=</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> f<span class="token punctuation">:</span>
        lines <span class="token operator">=</span> f<span class="token punctuation">.</span>readlines<span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">for</span> line <span class="token keyword">in</span> lines<span class="token punctuation">:</span>
            stop_words<span class="token punctuation">.</span>append<span class="token punctuation">(</span>line<span class="token punctuation">.</span>strip<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

    <span class="token comment"># 添加关键词</span>
    my_words <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'好听'</span><span class="token punctuation">,</span> <span class="token string">'华语'</span><span class="token punctuation">,</span> <span class="token string">'喜欢'</span><span class="token punctuation">,</span> <span class="token string">'音乐'</span><span class="token punctuation">,</span> <span class="token string">'耳机'</span><span class="token punctuation">,</span> <span class="token string">'歌手'</span><span class="token punctuation">,</span> <span class="token string">'网易云'</span><span class="token punctuation">]</span>   
    <span class="token keyword">for</span> i <span class="token keyword">in</span> my_words<span class="token punctuation">:</span>
        jieba<span class="token punctuation">.</span>add_word<span class="token punctuation">(</span>i<span class="token punctuation">)</span> 

    <span class="token comment"># 自定义停用词</span>
    my_stop_words <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'哈哈哈'</span><span class="token punctuation">,</span> <span class="token string">'哈哈哈哈'</span><span class="token punctuation">,</span> <span class="token string">'评论'</span><span class="token punctuation">]</span>
    stop_words<span class="token punctuation">.</span>extend<span class="token punctuation">(</span>my_stop_words<span class="token punctuation">)</span>               

    <span class="token comment"># 分词</span>
    word_num <span class="token operator">=</span> jieba<span class="token punctuation">.</span>lcut<span class="token punctuation">(</span>x_series<span class="token punctuation">.</span>astype<span class="token punctuation">(</span><span class="token string">'str'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token builtin">str</span><span class="token punctuation">.</span>cat<span class="token punctuation">(</span>sep<span class="token operator">=</span><span class="token string">'。'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> cut_all<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span>

    <span class="token comment"># 条件筛选</span>
    word_num_selected <span class="token operator">=</span> <span class="token punctuation">[</span>i <span class="token keyword">for</span> i <span class="token keyword">in</span> word_num <span class="token keyword">if</span> i <span class="token keyword">not</span> <span class="token keyword">in</span> stop_words <span class="token keyword">and</span> <span class="token builtin">len</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token operator">&gt;=</span><span class="token number">2</span><span class="token punctuation">]</span>
    
    <span class="token keyword">return</span> word_num_selected

text1 <span class="token operator">=</span> get_cut_words<span class="token punctuation">(</span>x_series<span class="token operator">=</span>df<span class="token punctuation">.</span>text<span class="token punctuation">)</span><span class="token comment">#df.columns某一列</span>

<span class="token keyword">def</span> <span class="token function">gen_my_stylecloud</span><span class="token punctuation">(</span>text<span class="token punctuation">,</span> file_name<span class="token punctuation">,</span> icon_name<span class="token operator">=</span><span class="token string">'fas fa-music'</span><span class="token punctuation">)</span><span class="token punctuation">:</span><span class="token comment">#这里的icon_name可以自定义更换</span>
    stylecloud<span class="token punctuation">.</span>gen_stylecloud<span class="token punctuation">(</span>text<span class="token operator">=</span><span class="token string">' '</span><span class="token punctuation">.</span>join<span class="token punctuation">(</span>text<span class="token punctuation">)</span><span class="token punctuation">,</span> max_words<span class="token operator">=</span><span class="token number">1000</span><span class="token punctuation">,</span>
                              collocations<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">,</span>
                              font_path<span class="token operator">=</span><span class="token string">r'‪C:/Windows/Fonts/msyh.ttc'</span><span class="token punctuation">,</span>
                              icon_name<span class="token operator">=</span>icon_name<span class="token punctuation">,</span>
                              size<span class="token operator">=</span><span class="token number">653</span><span class="token punctuation">,</span>
                              output_name<span class="token operator">=</span><span class="token string-interpolation"><span class="token string">f'</span><span class="token interpolation"><span class="token punctuation">{</span>file_name<span class="token punctuation">}</span></span><span class="token string">.png'</span></span>
                             <span class="token punctuation">)</span>  
gen_my_stylecloud<span class="token punctuation">(</span>text<span class="token operator">=</span>text1<span class="token punctuation">,</span> file_name<span class="token operator">=</span><span class="token string">'music_text'</span><span class="token punctuation">)</span>
Image<span class="token punctuation">(</span>filename<span class="token operator">=</span><span class="token string">'music_text.png'</span><span class="token punctuation">)</span>
</code></pre></div><p><img src="https://img-blog.csdnimg.cn/20201221210733605.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ0NzYwOTEy,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p> <h3 id="_7-歌曲出现次数top10"><a href="#_7-歌曲出现次数top10" class="header-anchor">#</a> 7.歌曲出现次数TOP10</h3> <div class="language-python extra-class"><pre class="language-python"><code>dfm <span class="token operator">=</span> pd<span class="token punctuation">.</span>read_csv<span class="token punctuation">(</span><span class="token string">'D:\Pandas\music_name_pandas.csv'</span><span class="token punctuation">,</span>encoding<span class="token operator">=</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span>
dfm<span class="token punctuation">.</span>shape
dfm<span class="token punctuation">[</span><span class="token string">'name'</span><span class="token punctuation">]</span> <span class="token operator">=</span> dfm<span class="token punctuation">[</span><span class="token string">'name'</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token builtin">str</span><span class="token punctuation">.</span>strip<span class="token punctuation">(</span><span class="token punctuation">)</span>
dfm<span class="token punctuation">[</span><span class="token string">'count'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span>
df_name <span class="token operator">=</span> dfm<span class="token punctuation">.</span>groupby<span class="token punctuation">(</span><span class="token string">'name'</span><span class="token punctuation">,</span>as_index<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token string">'count'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>count<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>sort_values<span class="token punctuation">(</span><span class="token string">'count'</span><span class="token punctuation">,</span>ascending<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span>
df_name <span class="token operator">=</span> df_name<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token number">30</span><span class="token punctuation">]</span>
df_name
</code></pre></div><div><style scoped="scoped">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }
&lt;!--beforebegin--&gt;&lt;div class=&quot;language- extra-class&quot;&gt;&lt;!--afterbegin--&gt;&lt;pre&gt;&lt;code&gt;.dataframe tbody tr th {
    vertical-align: top;
}

.dataframe thead th {
    text-align: right;
}
&lt;/code&gt;&lt;/pre&gt;
&lt;!--beforeend--&gt;&lt;/div&gt;&lt;!--afterend--&gt;</style> <table border="1" class="dataframe"><thead><tr style="text-align:right;"><th></th> <th>name</th> <th>count</th></tr></thead> <tbody><tr><th>2047</th> <td>偏爱</td> <td>50</td></tr> <tr><th>1821</th> <td>会不会（吉他版）</td> <td>50</td></tr> <tr><th>4951</th> <td>永不失联的爱</td> <td>45</td></tr> <tr><th>2715</th> <td>在哪里都很好</td> <td>42</td></tr> <tr><th>5953</th> <td>耗尽</td> <td>40</td></tr> <tr><th>1801</th> <td>他只是经过</td> <td>37</td></tr> <tr><th>4563</th> <td>是但求其爱</td> <td>36</td></tr> <tr><th>5086</th> <td>海底</td> <td>34</td></tr> <tr><th>5871</th> <td>经济舱 (Live)</td> <td>33</td></tr> <tr><th>3108</th> <td>如果当时2020</td> <td>31</td></tr> <tr><th>4566</th> <td>是你想成为的大人吗</td> <td>30</td></tr> <tr><th>4571</th> <td>是想你的声音啊</td> <td>30</td></tr> <tr><th>4020</th> <td>我很好（吉他版）</td> <td>30</td></tr> <tr><th>4375</th> <td>斯芬克斯星座</td> <td>28</td></tr> <tr><th>3601</th> <td>彩券</td> <td>28</td></tr> <tr><th>1386</th> <td>三号线（吉他版）</td> <td>27</td></tr> <tr><th>4217</th> <td>执迷不悟</td> <td>27</td></tr> <tr><th>2943</th> <td>天外来物</td> <td>23</td></tr> <tr><th>1376</th> <td>万有引力</td> <td>20</td></tr> <tr><th>5361</th> <td>爱，存在</td> <td>20</td></tr> <tr><th>5591</th> <td>相安</td> <td>19</td></tr> <tr><th>4195</th> <td>所念皆星河</td> <td>19</td></tr> <tr><th>6301</th> <td>谁说梦想不能当饭吃</td> <td>19</td></tr> <tr><th>3829</th> <td>想见你想见你想见你</td> <td>18</td></tr> <tr><th>6661</th> <td>野心</td> <td>18</td></tr> <tr><th>3095</th> <td>如果你也这样过</td> <td>17</td></tr> <tr><th>4595</th> <td>晚风</td> <td>16</td></tr> <tr><th>5732</th> <td>空的城</td> <td>16</td></tr> <tr><th>2787</th> <td>夏天的风</td> <td>15</td></tr> <tr><th>2723</th> <td>在这个年纪也许不配拥有爱情</td> <td>15</td></tr></tbody></table></div> <div class="language-python extra-class"><pre class="language-python"><code>df_name <span class="token operator">=</span> df_name<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token number">10</span><span class="token punctuation">]</span>
names <span class="token operator">=</span> df_name<span class="token punctuation">[</span><span class="token string">'name'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>tolist<span class="token punctuation">(</span><span class="token punctuation">)</span>
plays <span class="token operator">=</span> df_name<span class="token punctuation">[</span><span class="token string">'count'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>tolist<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><div class="language-python extra-class"><pre class="language-python"><code>df_name <span class="token operator">=</span> get_matplot<span class="token punctuation">(</span>x<span class="token operator">=</span>names<span class="token punctuation">,</span>y<span class="token operator">=</span>plays<span class="token punctuation">,</span>chart<span class="token operator">=</span><span class="token string">'barh'</span><span class="token punctuation">,</span>title<span class="token operator">=</span><span class="token string">'网易云音乐华语歌单歌曲 TOP10'</span><span class="token punctuation">,</span>ha<span class="token operator">=</span><span class="token string">'left'</span><span class="token punctuation">,</span>size<span class="token operator">=</span><span class="token number">10</span><span class="token punctuation">,</span>color<span class="token operator">=</span>color<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
df_name
</code></pre></div><p><img src="https://img-blog.csdnimg.cn/20201221210748582.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ0NzYwOTEy,size_16,color_FFFFFF,t_70" alt="[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-TJF1leBQ-1608555402651)(wyy_files/wyy_43_0.svg)]"></p> <h3 id="_8-歌单贡献up主top10"><a href="#_8-歌单贡献up主top10" class="header-anchor">#</a> 8.歌单贡献up主Top10</h3> <div class="language-python extra-class"><pre class="language-python"><code>df_user <span class="token operator">=</span> pd<span class="token punctuation">.</span>read_csv<span class="token punctuation">(</span><span class="token string">'D:\Pandas\playlist.csv'</span><span class="token punctuation">,</span>encoding<span class="token operator">=</span><span class="token string">'utf-8'</span><span class="token punctuation">,</span>header<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span>names<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">'url'</span><span class="token punctuation">,</span><span class="token string">'title'</span><span class="token punctuation">,</span><span class="token string">'play'</span><span class="token punctuation">,</span><span class="token string">'user'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>sep<span class="token operator">=</span><span class="token string">','</span><span class="token punctuation">)</span>
df_user<span class="token punctuation">.</span>shape
df_user <span class="token operator">=</span> df_user<span class="token punctuation">.</span>iloc<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">:</span><span class="token punctuation">]</span>
df_user<span class="token punctuation">[</span><span class="token string">'count'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span>
df_user <span class="token operator">=</span> df_user<span class="token punctuation">.</span>groupby<span class="token punctuation">(</span><span class="token string">'user'</span><span class="token punctuation">,</span>as_index<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token string">'count'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>count<span class="token punctuation">(</span><span class="token punctuation">)</span>
df_user <span class="token operator">=</span> df_user<span class="token punctuation">.</span>sort_values<span class="token punctuation">(</span><span class="token string">'count'</span><span class="token punctuation">,</span>ascending<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token number">10</span><span class="token punctuation">]</span>
df_user
</code></pre></div><div><style scoped="scoped">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }
&lt;!--beforebegin--&gt;&lt;div class=&quot;language- extra-class&quot;&gt;&lt;!--afterbegin--&gt;&lt;pre&gt;&lt;code&gt;.dataframe tbody tr th {
    vertical-align: top;
}

.dataframe thead th {
    text-align: right;
}
&lt;/code&gt;&lt;/pre&gt;
&lt;!--beforeend--&gt;&lt;/div&gt;&lt;!--afterend--&gt;</style> <table border="1" class="dataframe"><thead><tr style="text-align:right;"><th></th> <th>user</th> <th>count</th></tr></thead> <tbody><tr><th>226</th> <td>原创君</td> <td>32</td></tr> <tr><th>289</th> <td>安阳汪涛</td> <td>24</td></tr> <tr><th>356</th> <td>我自清欢丨被嫌弃的唐唐的一生</td> <td>19</td></tr> <tr><th>550</th> <td>蒙丽娜沙的微笑</td> <td>14</td></tr> <tr><th>559</th> <td>螚安Vivienne</td> <td>12</td></tr> <tr><th>114</th> <td>mayuko然</td> <td>12</td></tr> <tr><th>341</th> <td>情思天鹅</td> <td>12</td></tr> <tr><th>260</th> <td>圈圈的呆子</td> <td>11</td></tr> <tr><th>273</th> <td>大肥猫好可爱哟</td> <td>11</td></tr> <tr><th>541</th> <td>苏奕杰</td> <td>10</td></tr></tbody></table></div> <div class="language-python extra-class"><pre class="language-python"><code>df_user <span class="token operator">=</span> df_user<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token number">10</span><span class="token punctuation">]</span>
names <span class="token operator">=</span> df_user<span class="token punctuation">[</span><span class="token string">'user'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>tolist<span class="token punctuation">(</span><span class="token punctuation">)</span>
nums <span class="token operator">=</span> df_user<span class="token punctuation">[</span><span class="token string">'count'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>tolist<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><div class="language-python extra-class"><pre class="language-python"><code>df_u <span class="token operator">=</span> get_matplot<span class="token punctuation">(</span>x<span class="token operator">=</span>names<span class="token punctuation">,</span>y<span class="token operator">=</span>nums<span class="token punctuation">,</span>chart<span class="token operator">=</span><span class="token string">'barh'</span><span class="token punctuation">,</span>title<span class="token operator">=</span><span class="token string">'歌单贡献UP主 TOP10'</span><span class="token punctuation">,</span>ha<span class="token operator">=</span><span class="token string">'left'</span><span class="token punctuation">,</span>size<span class="token operator">=</span><span class="token number">10</span><span class="token punctuation">,</span>color<span class="token operator">=</span>color<span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
df_u
</code></pre></div><p><img src="https://img-blog.csdnimg.cn/20201221210801549.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ0NzYwOTEy,size_16,color_FFFFFF,t_70" alt="[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-z3AJnpBX-1608555402660)(wyy_files/wyy_47_0.svg)]"></p> <h2 id="总结"><a href="#总结" class="header-anchor">#</a> 总结：</h2> <p>csv数据存在部分读取不全的情况，我的解决办法打开一个空的excel，然后打开导入并选中csv，这时会弹出窗口提示你设置分隔符，而不是直接双击csv文件用excel打开，两者有区别。
然后对每项数据在excel进行简单筛选，因为有些数据会存在格式问题，当然你也可以直接pd读取，然后根据报错去excel调整相应的列，我这里的问题是collection列的数据存在不能转换int，原因就是有一行的数据没有被分割，手动修改或者直接删除即可。这样得到的效果也有缺失，但是比之前只有800多条多了200多条，还是值得的。
究其原因，可能是爬取保存的数据格式或者是默认分隔符为,所致，因为文字信息里面也存在','。</p> <h2 id="补充"><a href="#补充" class="header-anchor">#</a> 补充：</h2> <p>加上：error_bad_lines=False，上面的问题即可解决，意思是忽略此行</p> <p>简单测试，成功，数据基本上没有丢失</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">import</span> pandas <span class="token keyword">as</span> pd
<span class="token keyword">import</span> numpy <span class="token keyword">as</span> np

df <span class="token operator">=</span> pd<span class="token punctuation">.</span>read_csv<span class="token punctuation">(</span><span class="token string">'D:\Pandas\网易云数据分析\music_message.csv'</span><span class="token punctuation">,</span>header<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span>error_bad_lines<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">,</span>names<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">'title'</span><span class="token punctuation">,</span><span class="token string">'tag'</span><span class="token punctuation">,</span><span class="token string">'text'</span><span class="token punctuation">,</span><span class="token string">'collection'</span><span class="token punctuation">,</span><span class="token string">'play'</span><span class="token punctuation">,</span><span class="token string">'songs'</span><span class="token punctuation">,</span><span class="token string">'comments'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>encoding<span class="token operator">=</span><span class="token string">'utf-8-sig'</span><span class="token punctuation">)</span>
df<span class="token punctuation">.</span>to_excel<span class="token punctuation">(</span><span class="token string">'demo.xlsx'</span><span class="token punctuation">,</span>index<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="爬虫代码"><a href="#爬虫代码" class="header-anchor">#</a> 爬虫代码：</h3> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">from</span> bs4 <span class="token keyword">import</span> BeautifulSoup
<span class="token keyword">import</span> requests
<span class="token keyword">import</span> time

headers <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token string">'User-Agent'</span><span class="token punctuation">:</span> <span class="token string">'Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/63.0.3239.132 Safari/537.36'</span>
<span class="token punctuation">}</span>

<span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1330</span><span class="token punctuation">,</span> <span class="token number">35</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span>
    time<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>
    url <span class="token operator">=</span> <span class="token string">'https://music.163.com/discover/playlist/?cat=华语&amp;order=hot&amp;limit=35&amp;offset='</span> <span class="token operator">+</span> <span class="token builtin">str</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token comment">#修改这里即可</span>
    response <span class="token operator">=</span> requests<span class="token punctuation">.</span>get<span class="token punctuation">(</span>url<span class="token operator">=</span>url<span class="token punctuation">,</span> headers<span class="token operator">=</span>headers<span class="token punctuation">)</span>
    html <span class="token operator">=</span> response<span class="token punctuation">.</span>text
    soup <span class="token operator">=</span> BeautifulSoup<span class="token punctuation">(</span>html<span class="token punctuation">,</span> <span class="token string">'html.parser'</span><span class="token punctuation">)</span>
    <span class="token comment"># 获取包含歌单详情页网址的标签</span>
    ids <span class="token operator">=</span> soup<span class="token punctuation">.</span>select<span class="token punctuation">(</span><span class="token string">'.dec a'</span><span class="token punctuation">)</span>
    <span class="token comment"># 获取包含歌单索引页信息的标签</span>
    lis <span class="token operator">=</span> soup<span class="token punctuation">.</span>select<span class="token punctuation">(</span><span class="token string">'#m-pl-container li'</span><span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>lis<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token keyword">for</span> j <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>lis<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token comment"># 获取歌单详情页地址</span>
        url <span class="token operator">=</span> ids<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">'href'</span><span class="token punctuation">]</span>
        <span class="token comment"># 获取歌单标题</span>
        title <span class="token operator">=</span> ids<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">'title'</span><span class="token punctuation">]</span>
        <span class="token comment"># 获取歌单播放量</span>
        play <span class="token operator">=</span> lis<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">.</span>select<span class="token punctuation">(</span><span class="token string">'.nb'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>get_text<span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token comment"># 获取歌单贡献者名字</span>
        user <span class="token operator">=</span> lis<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">.</span>select<span class="token punctuation">(</span><span class="token string">'p'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>select<span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>get_text<span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token comment"># 输出歌单索引页信息</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> title<span class="token punctuation">,</span> play<span class="token punctuation">,</span> user<span class="token punctuation">)</span>
        <span class="token comment"># 将信息写入CSV文件中</span>
        <span class="token keyword">with</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">'playlist.csv'</span><span class="token punctuation">,</span> <span class="token string">'a+'</span><span class="token punctuation">,</span> encoding<span class="token operator">=</span><span class="token string">'utf-8-sig'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> f<span class="token punctuation">:</span>
            f<span class="token punctuation">.</span>write<span class="token punctuation">(</span>url <span class="token operator">+</span> <span class="token string">','</span> <span class="token operator">+</span> title <span class="token operator">+</span> <span class="token string">','</span> <span class="token operator">+</span> play <span class="token operator">+</span> <span class="token string">','</span> <span class="token operator">+</span> user <span class="token operator">+</span> <span class="token string">'\n'</span><span class="token punctuation">)</span>
</code></pre></div><div class="language-python extra-class"><pre class="language-python"><code><span class="token triple-quoted-string string">'''
Author: 你爸爸lzm
Date: 2020-12-20 23:19:00
Notes: 使用built命令快速得到一些常用的snippets,右击py文件可以preview代码
LastEditTime: 2020-12-21 21:56:48
'''</span>
<span class="token keyword">from</span> bs4 <span class="token keyword">import</span> BeautifulSoup
<span class="token keyword">import</span> pandas <span class="token keyword">as</span> pd
<span class="token keyword">import</span> requests
<span class="token keyword">import</span> time

df <span class="token operator">=</span> pd<span class="token punctuation">.</span>read_csv<span class="token punctuation">(</span><span class="token string">'playlist.csv'</span><span class="token punctuation">,</span> header<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">,</span> error_bad_lines<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">,</span> names<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">'url'</span><span class="token punctuation">,</span> <span class="token string">'title'</span><span class="token punctuation">,</span> <span class="token string">'play'</span><span class="token punctuation">,</span> <span class="token string">'user'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

headers <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token string">'User-Agent'</span><span class="token punctuation">:</span> <span class="token string">'Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/63.0.3239.132 Safari/537.36'</span>
<span class="token punctuation">}</span>

<span class="token keyword">for</span> i <span class="token keyword">in</span> df<span class="token punctuation">[</span><span class="token string">'url'</span><span class="token punctuation">]</span><span class="token punctuation">:</span>
    time<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>
    url <span class="token operator">=</span> <span class="token string">'https://music.163.com'</span> <span class="token operator">+</span> i
    response <span class="token operator">=</span> requests<span class="token punctuation">.</span>get<span class="token punctuation">(</span>url<span class="token operator">=</span>url<span class="token punctuation">,</span> headers<span class="token operator">=</span>headers<span class="token punctuation">)</span>
    html <span class="token operator">=</span> response<span class="token punctuation">.</span>text
    soup <span class="token operator">=</span> BeautifulSoup<span class="token punctuation">(</span>html<span class="token punctuation">,</span> <span class="token string">'html.parser'</span><span class="token punctuation">)</span>
    <span class="token comment"># 获取歌单标题</span>
    title <span class="token operator">=</span> soup<span class="token punctuation">.</span>select<span class="token punctuation">(</span><span class="token string">'h2'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>get_text<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>replace<span class="token punctuation">(</span><span class="token string">','</span><span class="token punctuation">,</span> <span class="token string">'，'</span><span class="token punctuation">)</span>
    <span class="token comment"># 获取标签</span>
    tags <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
    tags_message <span class="token operator">=</span> soup<span class="token punctuation">.</span>select<span class="token punctuation">(</span><span class="token string">'.u-tag i'</span><span class="token punctuation">)</span>
    <span class="token keyword">for</span> p <span class="token keyword">in</span> tags_message<span class="token punctuation">:</span>
        tags<span class="token punctuation">.</span>append<span class="token punctuation">(</span>p<span class="token punctuation">.</span>get_text<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token comment"># 对标签进行格式化</span>
    <span class="token keyword">if</span> <span class="token builtin">len</span><span class="token punctuation">(</span>tags<span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">1</span><span class="token punctuation">:</span>
        tag <span class="token operator">=</span> <span class="token string">'-'</span><span class="token punctuation">.</span>join<span class="token punctuation">(</span>tags<span class="token punctuation">)</span>
    <span class="token keyword">else</span><span class="token punctuation">:</span>
        tag <span class="token operator">=</span> tags<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
    <span class="token comment"># 获取歌单介绍</span>
    <span class="token keyword">if</span> soup<span class="token punctuation">.</span>select<span class="token punctuation">(</span><span class="token string">'#album-desc-more'</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        text <span class="token operator">=</span> soup<span class="token punctuation">.</span>select<span class="token punctuation">(</span><span class="token string">'#album-desc-more'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>get_text<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>replace<span class="token punctuation">(</span><span class="token string">'\n'</span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">.</span>replace<span class="token punctuation">(</span><span class="token string">','</span><span class="token punctuation">,</span> <span class="token string">'，'</span><span class="token punctuation">)</span>
    <span class="token keyword">else</span><span class="token punctuation">:</span>
        text <span class="token operator">=</span> <span class="token string">'无'</span>
    <span class="token comment"># 获取歌单收藏量</span>
    collection <span class="token operator">=</span> soup<span class="token punctuation">.</span>select<span class="token punctuation">(</span><span class="token string">'#content-operation i'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>get_text<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>replace<span class="token punctuation">(</span><span class="token string">'('</span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">.</span>replace<span class="token punctuation">(</span><span class="token string">')'</span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">)</span>
    <span class="token comment"># 歌单播放量</span>
    play <span class="token operator">=</span> soup<span class="token punctuation">.</span>select<span class="token punctuation">(</span><span class="token string">'.s-fc6'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>get_text<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token comment"># 歌单内歌曲数</span>
    songs <span class="token operator">=</span> soup<span class="token punctuation">.</span>select<span class="token punctuation">(</span><span class="token string">'#playlist-track-count'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>get_text<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token comment"># 歌单评论数</span>
    comments <span class="token operator">=</span> soup<span class="token punctuation">.</span>select<span class="token punctuation">(</span><span class="token string">'#cnt_comment_count'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>get_text<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token comment"># 输出歌单详情页信息</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>title<span class="token punctuation">,</span> tag<span class="token punctuation">,</span> text<span class="token punctuation">,</span> collection<span class="token punctuation">,</span> play<span class="token punctuation">,</span> songs<span class="token punctuation">,</span> comments<span class="token punctuation">)</span>
    <span class="token comment"># 将详情页信息写入CSV文件中</span>
    <span class="token keyword">with</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">'music_message.csv'</span><span class="token punctuation">,</span> <span class="token string">'a+'</span><span class="token punctuation">,</span> encoding<span class="token operator">=</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> f<span class="token punctuation">:</span>
        <span class="token comment"># f.write(title + '/' + tag + '/' + text + '/' + collection + '/' + play + '/' + songs + '/' + comments + '\n')</span>
        f<span class="token punctuation">.</span>write<span class="token punctuation">(</span>title <span class="token operator">+</span> <span class="token string">','</span> <span class="token operator">+</span> tag <span class="token operator">+</span> <span class="token string">','</span> <span class="token operator">+</span> text <span class="token operator">+</span> <span class="token string">','</span> <span class="token operator">+</span> collection <span class="token operator">+</span> <span class="token string">','</span> <span class="token operator">+</span> play <span class="token operator">+</span> <span class="token string">','</span> <span class="token operator">+</span> songs <span class="token operator">+</span> <span class="token string">','</span> <span class="token operator">+</span> comments <span class="token operator">+</span> <span class="token string">'\n'</span><span class="token punctuation">)</span>
    <span class="token comment"># 获取歌单内歌曲名称</span>
    li <span class="token operator">=</span> soup<span class="token punctuation">.</span>select<span class="token punctuation">(</span><span class="token string">'.f-hide li a'</span><span class="token punctuation">)</span>
    <span class="token keyword">for</span> j <span class="token keyword">in</span> li<span class="token punctuation">:</span>
        <span class="token keyword">with</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">'music_name.csv'</span><span class="token punctuation">,</span> <span class="token string">'a+'</span><span class="token punctuation">,</span> encoding<span class="token operator">=</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> f<span class="token punctuation">:</span>
            f<span class="token punctuation">.</span>write<span class="token punctuation">(</span>j<span class="token punctuation">.</span>get_text<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">'\n'</span><span class="token punctuation">)</span>
</code></pre></div><p>数据集大家自己通过爬虫代码抓取吧。</p> <p>数据集：
<a href="https://pan.baidu.com/s/1LtOReq75Put9NMtegKCCCQ" target="_blank" rel="noopener noreferrer">链接：https://pan.baidu.com/s/1LtOReq75Put9NMtegKCCCQ
<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>提取码：love</p></div></article> <div class="main-div vssue"><!----></div></div></main> <aside class="aside" data-v-b3fda33c data-v-b3fda33c><div class="info-card main-div" data-v-1311ce9e data-v-b3fda33c><div class="info-card-header" style="background-size:cover;background-repeat:no-repeat;background-position:center;background-attachment:scroll;background-image:url(/lzmblog/me.png);" data-v-1311ce9e><img src="/lzmblog/logo.jpg" alt="lzmlovers" class="info-avatar" data-v-1311ce9e></div> <div class="info-card-body" data-v-1311ce9e><section class="info-name" data-v-1311ce9e>
      lzmlovers
    </section> <section class="info-desc" data-v-1311ce9e>Tomorrow will be better<br/>明天会更好</section> <section class="info-contact" data-v-1311ce9e><section data-v-1311ce9e><span data-v-1311ce9e data-v-1311ce9e><svg class="icon" style="font-size:1em;" data-v-1311ce9e data-v-1311ce9e><use xlink:href="#icon-location" data-v-1311ce9e data-v-1311ce9e></use></svg><span class="info-text" data-v-1311ce9e data-v-1311ce9e>
          YongZhou, China
        </span></span></section> <!----> <section data-v-1311ce9e><span data-v-1311ce9e data-v-1311ce9e><svg class="icon" style="font-size:1em;" data-v-1311ce9e data-v-1311ce9e><use xlink:href="#icon-email" data-v-1311ce9e data-v-1311ce9e></use></svg><span class="info-text" data-v-1311ce9e data-v-1311ce9e>
          2095793572@qq.com
        </span></span></section></section></div> <div class="info-card-footer" data-v-1311ce9e><p class="footer-sns-link" data-v-1311ce9e><a target="_blank" href="https://blog.csdn.net/qq_44760912" class="sns-link" data-v-1311ce9e><span class="sns-icon" data-v-1311ce9e data-v-1311ce9e><svg class="icon" style="font-size:35px;" data-v-1311ce9e data-v-1311ce9e><use xlink:href="#icon-csdn" data-v-1311ce9e data-v-1311ce9e></use></svg></span></a><a target="_blank" href="https://weibo.com/u/7747087955" class="sns-link" data-v-1311ce9e><span class="sns-icon" data-v-1311ce9e data-v-1311ce9e><svg class="icon" style="font-size:35px;" data-v-1311ce9e data-v-1311ce9e><use xlink:href="#icon-weibo" data-v-1311ce9e data-v-1311ce9e></use></svg></span></a><a target="_blank" href="https://www.zhihu.com/people/xiao-zhu-wen-wen-ti" class="sns-link" data-v-1311ce9e><span class="sns-icon" data-v-1311ce9e data-v-1311ce9e><svg class="icon" style="font-size:35px;" data-v-1311ce9e data-v-1311ce9e><use xlink:href="#icon-zhihu" data-v-1311ce9e data-v-1311ce9e></use></svg></span></a><a target="_blank" href="https://github.com/git123hub121" class="sns-link" data-v-1311ce9e><span class="sns-icon" data-v-1311ce9e data-v-1311ce9e><svg class="icon" style="font-size:35px;" data-v-1311ce9e data-v-1311ce9e><use xlink:href="#icon-github" data-v-1311ce9e data-v-1311ce9e></use></svg></span></a></p></div></div> <div class="post-toc main-div aside-toc" style="position:relative;top:0;width:0px;" data-v-b3fda33c><h4>- CATALOG</h4> <div class="post-nav-toc"><ul><li><a href="/lzmblog/posts/2020/12/21/%E7%BD%91%E6%98%93%E4%BA%91%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90%E5%AE%9E%E6%88%98.html#网易云数据分析">网易云数据分析</a><ul><li><a href="/lzmblog/posts/2020/12/21/%E7%BD%91%E6%98%93%E4%BA%91%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90%E5%AE%9E%E6%88%98.html#导入模块-读取数据">导入模块，读取数据</a></li><li><a href="/lzmblog/posts/2020/12/21/%E7%BD%91%E6%98%93%E4%BA%91%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90%E5%AE%9E%E6%88%98.html#数据处理、清洗">数据处理、清洗</a></li><li><a href="/lzmblog/posts/2020/12/21/%E7%BD%91%E6%98%93%E4%BA%91%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90%E5%AE%9E%E6%88%98.html#数据预览">数据预览</a></li><li><a href="/lzmblog/posts/2020/12/21/%E7%BD%91%E6%98%93%E4%BA%91%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90%E5%AE%9E%E6%88%98.html#构建通用函数-简化代码">构建通用函数，简化代码</a></li><li><a href="/lzmblog/posts/2020/12/21/%E7%BD%91%E6%98%93%E4%BA%91%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90%E5%AE%9E%E6%88%98.html#_1-歌单播放量top10">1.歌单播放量Top10</a></li><li><a href="/lzmblog/posts/2020/12/21/%E7%BD%91%E6%98%93%E4%BA%91%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90%E5%AE%9E%E6%88%98.html#_2-歌单收藏量top10">2.歌单收藏量Top10</a></li><li><a href="/lzmblog/posts/2020/12/21/%E7%BD%91%E6%98%93%E4%BA%91%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90%E5%AE%9E%E6%88%98.html#_3-歌单评论数top10">3.歌单评论数Top10</a></li><li><a href="/lzmblog/posts/2020/12/21/%E7%BD%91%E6%98%93%E4%BA%91%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90%E5%AE%9E%E6%88%98.html#_4-歌单收藏数量分布情况">4.歌单收藏数量分布情况</a></li><li><a href="/lzmblog/posts/2020/12/21/%E7%BD%91%E6%98%93%E4%BA%91%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90%E5%AE%9E%E6%88%98.html#_5-歌单标签图">5.歌单标签图</a></li><li><a href="/lzmblog/posts/2020/12/21/%E7%BD%91%E6%98%93%E4%BA%91%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90%E5%AE%9E%E6%88%98.html#_6-歌单介绍词云图">6.歌单介绍词云图</a></li><li><a href="/lzmblog/posts/2020/12/21/%E7%BD%91%E6%98%93%E4%BA%91%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90%E5%AE%9E%E6%88%98.html#_7-歌曲出现次数top10">7.歌曲出现次数TOP10</a></li><li><a href="/lzmblog/posts/2020/12/21/%E7%BD%91%E6%98%93%E4%BA%91%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90%E5%AE%9E%E6%88%98.html#_8-歌单贡献up主top10">8.歌单贡献up主Top10</a></li></ul></li><li><a href="/lzmblog/posts/2020/12/21/%E7%BD%91%E6%98%93%E4%BA%91%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90%E5%AE%9E%E6%88%98.html#总结">总结：</a></li><li><a href="/lzmblog/posts/2020/12/21/%E7%BD%91%E6%98%93%E4%BA%91%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90%E5%AE%9E%E6%88%98.html#补充">补充：</a><ul><li><a href="/lzmblog/posts/2020/12/21/%E7%BD%91%E6%98%93%E4%BA%91%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90%E5%AE%9E%E6%88%98.html#爬虫代码">爬虫代码：</a></li></ul></li></ul></div></div></aside></div> <footer class="footer" data-v-7f2e4136><p class="footer-sns-link"><a target="_blank" href="https://blog.csdn.net/qq_44760912" class="sns-link"><span class="sns-icon"><svg class="icon" style="font-size:40px;"><use xlink:href="#icon-csdn"></use></svg></span></a><a target="_blank" href="https://weibo.com/u/7747087955" class="sns-link"><span class="sns-icon"><svg class="icon" style="font-size:40px;"><use xlink:href="#icon-weibo"></use></svg></span></a><a target="_blank" href="https://www.zhihu.com/people/xiao-zhu-wen-wen-ti" class="sns-link"><span class="sns-icon"><svg class="icon" style="font-size:40px;"><use xlink:href="#icon-zhihu"></use></svg></span></a><a target="_blank" href="https://github.com/git123hub121" class="sns-link"><span class="sns-icon"><svg class="icon" style="font-size:40px;"><use xlink:href="#icon-github"></use></svg></span></a></p> <div class="copyright"><span id="custom">Copyright &copy; Lovers Blog 2022 | <a href="https://www.vuepress.cn/" target="_blank">VuePress</a></span> <iframe src="https://ghbtns.com/github-btn.html?user=youdeliang&amp;repo=vuepress-theme-melodydl&amp;type=star&amp;count=true" frameborder="0" scrolling="0" width="80px" height="20px" class="footer-btn" style="margin-left: 2px; margin-bottom:-5px;"></iframe></div></footer></div><div class="global-ui"><!----><!----><canvas id="vuepress-canvas-ribbon"></canvas><canvas id="vuepress-canvas-cursor"></canvas><div></div><div class="kanbanniang" data-v-5775ee02><div class="banniang-container" style="display:;" data-v-5775ee02><div class="messageBox" style="right:68px;bottom:190px;display:none;" data-v-5775ee02>
      欢迎来到 Lovers 的博客
    </div> <div class="operation" style="right:90px;bottom:40px;display:;" data-v-5775ee02><i class="kbnfont kbn-ban-home ban-home" data-v-5775ee02></i> <i class="kbnfont kbn-ban-message message" data-v-5775ee02></i> <i class="kbnfont kbn-ban-close close" data-v-5775ee02></i> <a target="_blank" href="https://vuepress-theme-reco.recoluan.com/views/plugins/kanbanniang.html" data-v-5775ee02><i class="kbnfont kbn-ban-info info" data-v-5775ee02></i></a> <i class="kbnfont kbn-ban-theme skin" style="display:;" data-v-5775ee02></i></div> <canvas id="banniang" width="150" height="220" class="live2d" style="right:90px;bottom:-20px;opacity:0.9;" data-v-5775ee02></canvas></div> <div class="showBanNiang" style="display:none;" data-v-5775ee02>
    看板娘
  </div></div><APlayer audio="" fixed="true" mini="true" theme="#b7daff" loop="loop" order="list" preload="auto" volume="0.7" mutex="true" lrc-type="0" list-max-height="250" storage-name="vuepress-plugin-meting" id="aplayer-fixed"></APlayer></div></div>
    <script src="/lzmblog/assets/js/app.f6582fa6.js" defer></script><script src="/lzmblog/assets/js/7.f579b280.js" defer></script><script src="/lzmblog/assets/js/29.a4a5406a.js" defer></script>
  </body>
</html>

<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>豆瓣TOP250爬虫，数据分析项目实战——pyecharts | Lovers 的博客</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="icon" href="/lzmblog/lzmblog/favicon.ico">
    <link rel="stylesheet" href="/lzmblog/style.css">
    <meta name="description" content="个人博客">
    <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
    
    <link rel="preload" href="/lzmblog/assets/css/0.styles.34e16441.css" as="style"><link rel="preload" href="/lzmblog/assets/js/app.f6582fa6.js" as="script"><link rel="preload" href="/lzmblog/assets/js/7.f579b280.js" as="script"><link rel="preload" href="/lzmblog/assets/js/23.38743dcf.js" as="script"><link rel="prefetch" href="/lzmblog/assets/js/10.7063497e.js"><link rel="prefetch" href="/lzmblog/assets/js/11.c077aed5.js"><link rel="prefetch" href="/lzmblog/assets/js/12.3dc9bdbf.js"><link rel="prefetch" href="/lzmblog/assets/js/13.8c8bc62d.js"><link rel="prefetch" href="/lzmblog/assets/js/14.158e06d6.js"><link rel="prefetch" href="/lzmblog/assets/js/15.5cfac5ee.js"><link rel="prefetch" href="/lzmblog/assets/js/16.87fbfa73.js"><link rel="prefetch" href="/lzmblog/assets/js/17.7c036072.js"><link rel="prefetch" href="/lzmblog/assets/js/18.82e55eab.js"><link rel="prefetch" href="/lzmblog/assets/js/19.9dff5288.js"><link rel="prefetch" href="/lzmblog/assets/js/2.672cc620.js"><link rel="prefetch" href="/lzmblog/assets/js/20.a3f1c967.js"><link rel="prefetch" href="/lzmblog/assets/js/21.3ff5f263.js"><link rel="prefetch" href="/lzmblog/assets/js/22.89c469f1.js"><link rel="prefetch" href="/lzmblog/assets/js/24.6bcac6e8.js"><link rel="prefetch" href="/lzmblog/assets/js/25.28974017.js"><link rel="prefetch" href="/lzmblog/assets/js/26.d9e15335.js"><link rel="prefetch" href="/lzmblog/assets/js/27.8a39c8f2.js"><link rel="prefetch" href="/lzmblog/assets/js/28.a01661e8.js"><link rel="prefetch" href="/lzmblog/assets/js/29.a4a5406a.js"><link rel="prefetch" href="/lzmblog/assets/js/3.0e874f07.js"><link rel="prefetch" href="/lzmblog/assets/js/30.355f61f5.js"><link rel="prefetch" href="/lzmblog/assets/js/31.4e589136.js"><link rel="prefetch" href="/lzmblog/assets/js/32.0a74b181.js"><link rel="prefetch" href="/lzmblog/assets/js/33.1f0a784e.js"><link rel="prefetch" href="/lzmblog/assets/js/34.13798fc1.js"><link rel="prefetch" href="/lzmblog/assets/js/35.ce17e3ed.js"><link rel="prefetch" href="/lzmblog/assets/js/36.bafc423d.js"><link rel="prefetch" href="/lzmblog/assets/js/37.25f39385.js"><link rel="prefetch" href="/lzmblog/assets/js/38.c4bf83e1.js"><link rel="prefetch" href="/lzmblog/assets/js/39.1c904ce9.js"><link rel="prefetch" href="/lzmblog/assets/js/4.393c1c4d.js"><link rel="prefetch" href="/lzmblog/assets/js/5.f28696c6.js"><link rel="prefetch" href="/lzmblog/assets/js/6.22e81d8d.js"><link rel="prefetch" href="/lzmblog/assets/js/8.bfecf23e.js"><link rel="prefetch" href="/lzmblog/assets/js/9.3b6d93a9.js">
    <link rel="stylesheet" href="/lzmblog/assets/css/0.styles.34e16441.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div id="global-layout" data-v-7f2e4136><header class="header-container" style="background-size:cover;background-repeat:no-repeat;background-position:center;background-attachment:scroll;background-image:url(/lzmblog/post-bg.jpeg);" data-v-93921ff8 data-v-7f2e4136><nav class="navbar" style="position:absolute;opacity:1;transition:all 0.5s ease-in-out;" data-v-93921ff8><a href="/lzmblog/" class="navbar-link router-link-active">
    Lovers Blog
  </a> <ul class="navbar-links"><li><a href="/lzmblog/" class="router-link-active">
        HOME
      </a></li><li><a href="/lzmblog/about/">
        ABOUT
      </a></li><li><a href="/lzmblog/tags/">
        TAGS
      </a></li></ul> <div id="nav-icon"><span></span><span></span><span></span></div></nav> <div class="header-title" data-v-93921ff8 data-v-93921ff8><h1 data-v-93921ff8>豆瓣TOP250爬虫，数据分析项目实战——pyecharts</h1> <p data-v-93921ff8></p></div></header> <div class="container" data-v-b3fda33c data-v-7f2e4136><main class="main" style="width:60%;" data-v-b3fda33c><div class="post" data-v-b3fda33c data-v-b3fda33c><article class="main-div"><div class="post-content content content__default"><h1 id="python数据分析可视化项目-豆瓣top250爬虫-数据分析项目实战"><a href="#python数据分析可视化项目-豆瓣top250爬虫-数据分析项目实战" class="header-anchor">#</a> Python数据分析可视化项目——豆瓣TOP250爬虫，数据分析项目实战</h1> <h2 id="爬虫篇"><a href="#爬虫篇" class="header-anchor">#</a> 爬虫篇</h2> <p>暂时不写</p> <h2 id="数据分析篇"><a href="#数据分析篇" class="header-anchor">#</a> 数据分析篇</h2> <p>今天来将代码整理一下，说实话我都是按照别人的思路去修改的，感觉还没有学透彻，但是会用就行，重在举一反三。这也算是我学数据分析的一份作业吧。本来还想加入pie和其它图的。但是不想贪心了，总要留点遗憾来让你们来弥补。</p> <h3 id="_1-先导入所有模块"><a href="#_1-先导入所有模块" class="header-anchor">#</a> 1.先导入所有模块</h3> <p>这里我们用pyecharts来数据可视化，pd做数据清洗，jieba分词，collections做统计运算，re正则匹配</p> <p>**注意事项：**先说好数据我都会给个百度网盘链接，同时我使用的是绝对路径。因为我用的是vscode，但我一直没有去解决这个问题，网上也找过。如果有大佬知道，可以留言告诉我，要详细的那种。 我是用的是新版本pyecharts，与时俱进，追求新事物也是件很快乐的事。</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">import</span> jieba
<span class="token keyword">import</span> collections
<span class="token keyword">import</span> re
<span class="token keyword">from</span> pyecharts<span class="token punctuation">.</span>charts <span class="token keyword">import</span> WordCloud<span class="token punctuation">,</span>Page<span class="token punctuation">,</span>Bar<span class="token punctuation">,</span>Line<span class="token punctuation">,</span>Boxplot<span class="token punctuation">,</span>TreeMap<span class="token punctuation">,</span>Scatter
<span class="token keyword">from</span> pyecharts<span class="token punctuation">.</span><span class="token builtin">globals</span> <span class="token keyword">import</span> SymbolType
<span class="token keyword">from</span> pyecharts <span class="token keyword">import</span> options <span class="token keyword">as</span> opts
<span class="token keyword">from</span> pyecharts<span class="token punctuation">.</span><span class="token builtin">globals</span> <span class="token keyword">import</span> ThemeType<span class="token punctuation">,</span> CurrentConfig
<span class="token keyword">import</span> pandas <span class="token keyword">as</span> pd
</code></pre></div><p>我们先从一个与这个项目无关的词云图开始，主要是我喜欢这首歌：<i style="color:red;">一粒红尘</i>，因为豆瓣爬取的数据没有包括评论（其实是爬虫我从CSDN找的代码)。</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token comment">#文件路径是绝对路径，命名请自行修改或删除</span>
<span class="token keyword">with</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">&quot;D:\Python\douban_HTML\一粒红尘评论.txt&quot;</span><span class="token punctuation">,</span>encoding<span class="token operator">=</span><span class="token string">&quot;utf-8&quot;</span><span class="token punctuation">)</span> <span class="token keyword">as</span> f<span class="token punctuation">:</span>
    data <span class="token operator">=</span> f<span class="token punctuation">.</span>read<span class="token punctuation">(</span><span class="token punctuation">)</span>
newdata <span class="token operator">=</span> re<span class="token punctuation">.</span>findall<span class="token punctuation">(</span><span class="token string">'[\u4e00-\u9fa5]+'</span><span class="token punctuation">,</span>data<span class="token punctuation">,</span>re<span class="token punctuation">.</span>S<span class="token punctuation">)</span>
newdata <span class="token operator">=</span> <span class="token string">' '</span><span class="token punctuation">.</span>join<span class="token punctuation">(</span>newdata<span class="token punctuation">)</span>
txt_split <span class="token operator">=</span> jieba<span class="token punctuation">.</span>cut<span class="token punctuation">(</span>newdata<span class="token punctuation">,</span>cut_all<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>
result_list <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token keyword">with</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">&quot;D:\Python\douban_HTML\停用词大全.txt&quot;</span><span class="token punctuation">,</span>encoding<span class="token operator">=</span><span class="token string">&quot;utf-8&quot;</span><span class="token punctuation">)</span> <span class="token keyword">as</span> f<span class="token punctuation">:</span>
    tyc <span class="token operator">=</span> f<span class="token punctuation">.</span>readlines<span class="token punctuation">(</span><span class="token punctuation">)</span>
    stop_words <span class="token operator">=</span> <span class="token builtin">set</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">for</span> i <span class="token keyword">in</span> tyc<span class="token punctuation">:</span>
        i <span class="token operator">=</span> i<span class="token punctuation">.</span>replace<span class="token punctuation">(</span><span class="token string">&quot;\n&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;&quot;</span><span class="token punctuation">)</span>
        <span class="token keyword">for</span> i <span class="token keyword">in</span> tyc<span class="token punctuation">:</span>
            stop_words<span class="token punctuation">.</span>add<span class="token punctuation">(</span>i<span class="token punctuation">)</span>
<span class="token comment">#判断</span>
<span class="token keyword">for</span> word <span class="token keyword">in</span> txt_split<span class="token punctuation">:</span>
    <span class="token keyword">if</span> word <span class="token keyword">not</span> <span class="token keyword">in</span> stop_words <span class="token keyword">and</span> <span class="token builtin">len</span><span class="token punctuation">(</span>word<span class="token punctuation">)</span><span class="token operator">&gt;</span><span class="token number">1</span><span class="token punctuation">:</span>
        result_list<span class="token punctuation">.</span>append<span class="token punctuation">(</span>word<span class="token punctuation">)</span>
word_count <span class="token operator">=</span> collections<span class="token punctuation">.</span>Counter<span class="token punctuation">(</span>result_list<span class="token punctuation">)</span>
word_count_top100 <span class="token operator">=</span> word_count<span class="token punctuation">.</span>most_common<span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span>
word1 <span class="token operator">=</span> WordCloud<span class="token punctuation">(</span>
    init_opts<span class="token operator">=</span>opts<span class="token punctuation">.</span>InitOpts<span class="token punctuation">(</span>
        width<span class="token operator">=</span><span class="token string">'600px'</span><span class="token punctuation">,</span> height<span class="token operator">=</span><span class="token string">'400px'</span><span class="token punctuation">,</span> theme<span class="token operator">=</span>ThemeType<span class="token punctuation">.</span>WONDERLAND<span class="token punctuation">,</span><span class="token punctuation">)</span>
    <span class="token punctuation">)</span>
word1<span class="token punctuation">.</span>add<span class="token punctuation">(</span><span class="token string">'词频'</span><span class="token punctuation">,</span> data_pair<span class="token operator">=</span>word_count_top100<span class="token punctuation">,</span>
          word_size_range<span class="token operator">=</span><span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">]</span><span class="token punctuation">,</span> textstyle_opts<span class="token operator">=</span>opts<span class="token punctuation">.</span>TextStyleOpts<span class="token punctuation">(</span>font_family<span class="token operator">=</span><span class="token string">'cursive'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
          shape<span class="token operator">=</span>SymbolType<span class="token punctuation">.</span>DIAMOND<span class="token punctuation">)</span>
word1<span class="token punctuation">.</span>set_global_opts<span class="token punctuation">(</span>title_opts<span class="token operator">=</span>opts<span class="token punctuation">.</span>TitleOpts<span class="token punctuation">(</span><span class="token string">'一粒红尘评论词云图'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                      toolbox_opts<span class="token operator">=</span>opts<span class="token punctuation">.</span>ToolboxOpts<span class="token punctuation">(</span>is_show<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">,</span> orient<span class="token operator">=</span><span class="token string">'vertical'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                      tooltip_opts<span class="token operator">=</span>opts<span class="token punctuation">.</span>TooltipOpts<span class="token punctuation">(</span>is_show<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span> background_color<span class="token operator">=</span><span class="token string">'red'</span><span class="token punctuation">,</span> border_color<span class="token operator">=</span><span class="token string">'yellow'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment">#word1.render(&quot;一粒红尘评论词云图.html&quot;)</span>
word1<span class="token punctuation">.</span>render_notebook<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><div class="language-txt extra-class"><pre class="language-txt"><code>Building prefix dict from the default dictionary ... Loading model from cache C:\Users\ADMINI~1\AppData\Local\Temp\jieba.cache Loading model cost 1.920 seconds. Prefix dict has been built successfully. d:\Python\python\lib\site-packages\pyecharts\charts\chart.py:14: PendingDeprecationWarning: pyecharts 所有图表类型将在 v1.9.0 版本开始强制使用 ChartItem 进行数据项配置 :)  super().__init__(init_opts=init_opts)
</code></pre></div><p><strong>简要总结一下思路：</strong></p> <p>1.先用pandas读取文件</p> <p>2.利用re匹配自己想要的内容，这里我们需要匹配中文</p> <p>3.调用jieba库进行分词，这里是精确分词</p> <p>4.进阶操作，设置自己的停用词txt，进一步精确分词，去除不想要，不相关的词语</p> <p>5.通常使用replace()方法去除不想要的字符，很好理解，他的英文就是“代替”</p> <p>6.最终数据我们都需要保存到列表---list里面，这样pyacharts才能读取到数据，要不然会报错，并且折线图的x轴数据需要是字符串str类型，建议你们可以试试x，y都是int时，画出的图会咋样</p> <p>7.去参照pyecharts中文文档，自己添加组件，下面给大家整理一些主题</p> <p>8.格式化代码，避免缩进格式错误</p> <p>9.查看效果，这里推荐使用jupyter，在vscode下载这个插件就ok，因为它特殊的ipynb文件可以实时查看效果</p> <p>官方主题：thm = ''' | CHALK = 'chalk' #粉笔风 |
| DARK = 'dark' #暗黑风 |
| ESSOS = 'essos' #厄索斯大陆 |
| INFOGRAPHIC = 'infographic' #信息图 |
| LIGHT = 'light' #明亮风格 |
| MACARONS = 'macarons' #马卡龙 |
| PURPLE_PASSION = 'purple-passion' #紫色激情 |
| ROMA = 'roma' #石榴 |
| ROMANTIC = 'romantic' #浪漫风 |
| SHINE = 'shine' #闪耀风 |
| VINTAGE = 'vintage' #复古风 |
| WALDEN = 'walden' #瓦尔登湖 |
| WESTEROS = 'westeros' #维斯特洛大陆 |
| WHITE = 'white' #洁白风 | | WONDERLAND = 'wonderland' #仙境 '''</p> <h3 id="接下来步入正题-先读取数据源douban-250-2-csv"><a href="#接下来步入正题-先读取数据源douban-250-2-csv" class="header-anchor">#</a> 接下来步入正题，先读取数据源douban_250_2.csv</h3> <p>[3]</p> <div class="language-python extra-class"><pre class="language-python"><code>df <span class="token operator">=</span> pd<span class="token punctuation">.</span>read_csv<span class="token punctuation">(</span><span class="token string">&quot;D:\Python\douban_HTML\douban250_2.csv&quot;</span><span class="token punctuation">,</span>header<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span>names<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">&quot;title&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;info&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;score&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;people&quot;</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre></div><div class="language-txt extra-class"><pre class="language-txt"><code>&lt;&gt;:1: DeprecationWarning: invalid escape sequence \P &lt;&gt;:1: DeprecationWarning: invalid escape sequence \P &lt;&gt;:1: DeprecationWarning: invalid escape sequence \P &lt;ipython-input-3-d1978264e112&gt;:1: DeprecationWarning: invalid escape sequence \P  df = pd.read_csv(&quot;D:\Python\douban_HTML\douban250_2.csv&quot;,header=0,names=[&quot;title&quot;,&quot;info&quot;,&quot;score&quot;,&quot;people&quot;])
</code></pre></div><p>[4]</p> <div class="language-python extra-class"><pre class="language-python"><code>df<span class="token punctuation">.</span>head<span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token comment">#先展示10条</span>
</code></pre></div><table><thead><tr><th style="text-align:right;"></th> <th style="text-align:right;">title</th> <th style="text-align:right;">info</th> <th style="text-align:right;">score</th> <th style="text-align:right;">people</th></tr></thead> <tbody><tr><td style="text-align:right;">0</td> <td style="text-align:right;">肖申克的救赎</td> <td style="text-align:right;">1994 / 美国 / 犯罪 剧情</td> <td style="text-align:right;">9.7</td> <td style="text-align:right;">2186881人评价</td></tr> <tr><td style="text-align:right;">1</td> <td style="text-align:right;">霸王别姬</td> <td style="text-align:right;">1993 / 中国大陆 中国香港 / 剧情 爱情 同性</td> <td style="text-align:right;">9.6</td> <td style="text-align:right;">1622453人评价</td></tr> <tr><td style="text-align:right;">2</td> <td style="text-align:right;">阿甘正传</td> <td style="text-align:right;">1994 / 美国 / 剧情 爱情</td> <td style="text-align:right;">9.5</td> <td style="text-align:right;">1650384人评价</td></tr> <tr><td style="text-align:right;">3</td> <td style="text-align:right;">这个杀手不太冷</td> <td style="text-align:right;">1994 / 法国 美国 / 剧情 动作 犯罪</td> <td style="text-align:right;">9.4</td> <td style="text-align:right;">1834962人评价</td></tr> <tr><td style="text-align:right;">4</td> <td style="text-align:right;">泰坦尼克号</td> <td style="text-align:right;">1997 / 美国 / 剧情 爱情 灾难</td> <td style="text-align:right;">9.4</td> <td style="text-align:right;">1604815人评价</td></tr></tbody></table> <p><strong>通过数据我们可以从<span style="color:orange;">电影名字，年份，国家，电影类型，评论人数</span>去分析</strong></p> <p>1.对年份，国家，类型，评分计数---count</p> <p>2.电影排名，评分排名</p> <p>3.中外电影作品对比</p> <p>4.电影与评论数 大家可以自己画一个关系图去扩展些新的思路，比如环比(适合饼图)，这里推荐用drawio这个软件绘图，思维导图可以用ProcessOn</p> <p><strong>有了思路之后，但是这里面的数据并不是很友好，这也就是说我们还需要进行数据清洗</strong></p> <p>1.我们可以用excel，选中info列，进行批量处理单元格操作，以/作为分隔符拆分数据，注意拆分的数据会放在右侧，记得先将info列放置最右侧。</p> <p>2.使用pandas进行数据清洗 哈哈，你会发现，对于info列里面的数据，excel也并不好操作，因为类型有多种</p> <h3 id="_2-先来一个柱状图-分析豆瓣电影top250的年份统计"><a href="#_2-先来一个柱状图-分析豆瓣电影top250的年份统计" class="header-anchor">#</a> 2.先来一个柱状图  分析豆瓣电影top250的年份统计</h3> <p><strong>这里先定义几个列表,以免自己混淆，毕竟是将数据整合到一起，追求简洁</strong></p> <p>dom：爬取年份year 	dom1：bar 第一个图表的数据源列表 	dom2: bar2 第二个图表的数据源列表</p> <p>df_last：boxplot 以中国为行索引 	df_last1：以外国为行索引，这里在中外电影评分对比有用处，可直接调用</p> <p>doms2：bar3 国家计数top10 	dom3:bar4 数据源</p> <p>[5]</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token comment">#制作电影年份统计柱形图</span>
dom <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token keyword">for</span> i <span class="token keyword">in</span> df<span class="token punctuation">[</span><span class="token string">'info'</span><span class="token punctuation">]</span><span class="token punctuation">:</span>
    dom<span class="token punctuation">.</span>append<span class="token punctuation">(</span>i<span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token string">&quot;/&quot;</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>replace<span class="token punctuation">(</span><span class="token string">'(中国大陆)'</span><span class="token punctuation">,</span><span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>strip<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
df<span class="token punctuation">[</span><span class="token string">'year'</span><span class="token punctuation">]</span> <span class="token operator">=</span> dom
place <span class="token operator">=</span> df<span class="token punctuation">.</span>groupby<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'year'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token string">'year'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>agg<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'count'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
place<span class="token punctuation">.</span>reset_index<span class="token punctuation">(</span>inplace<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>
place_last <span class="token operator">=</span> place<span class="token punctuation">.</span>sort_index<span class="token punctuation">(</span><span class="token punctuation">)</span>
dom1 <span class="token operator">=</span> place_last<span class="token punctuation">.</span>sort_values<span class="token punctuation">(</span><span class="token string">'year'</span><span class="token punctuation">,</span> ascending<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>
x <span class="token operator">=</span> <span class="token builtin">list</span><span class="token punctuation">(</span>dom1<span class="token punctuation">[</span><span class="token string">'year'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
y <span class="token operator">=</span> <span class="token builtin">list</span><span class="token punctuation">(</span>dom1<span class="token punctuation">[</span><span class="token string">'count'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token comment">#制作柱形图</span>
bar <span class="token operator">=</span> <span class="token punctuation">(</span>
    Bar<span class="token punctuation">(</span>
        init_opts<span class="token operator">=</span>opts<span class="token punctuation">.</span>InitOpts<span class="token punctuation">(</span>theme<span class="token operator">=</span>ThemeType<span class="token punctuation">.</span>MACARONS<span class="token punctuation">)</span><span class="token comment">#在这里可以设置图表宽高</span>
    <span class="token punctuation">)</span>
    <span class="token punctuation">.</span>add_xaxis<span class="token punctuation">(</span>x<span class="token punctuation">)</span>
    <span class="token punctuation">.</span>add_yaxis<span class="token punctuation">(</span><span class="token string">&quot;豆瓣电影TOP250年份统计&quot;</span><span class="token punctuation">,</span>y<span class="token punctuation">)</span>
    <span class="token punctuation">.</span>set_global_opts<span class="token punctuation">(</span>
        title_opts<span class="token operator">=</span>opts<span class="token punctuation">.</span>TitleOpts<span class="token punctuation">(</span>title<span class="token operator">=</span><span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
                                  subtitle<span class="token operator">=</span><span class="token string">&quot;&quot;</span><span class="token punctuation">,</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token comment">#设置滚动条</span>
        datazoom_opts<span class="token operator">=</span>opts<span class="token punctuation">.</span>DataZoomOpts<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token comment">#图例设置</span>
        legend_opts<span class="token operator">=</span>opts<span class="token punctuation">.</span>LegendOpts<span class="token punctuation">(</span>
            pos_left<span class="token operator">=</span><span class="token string">'center'</span><span class="token punctuation">,</span> <span class="token comment"># 图例放置的位置，分上下左右，可用左右中表示，也可用百分比表示</span>
            pos_top<span class="token operator">=</span><span class="token string">'5%'</span><span class="token punctuation">,</span>
            orient<span class="token operator">=</span><span class="token string">'horizontal'</span><span class="token punctuation">,</span>   <span class="token comment"># horizontal、vertical #图例放置的方式 横着放or竖着放</span>
            textstyle_opts<span class="token operator">=</span>opts<span class="token punctuation">.</span>TextStyleOpts<span class="token punctuation">(</span>
                font_size<span class="token operator">=</span><span class="token number">16</span><span class="token punctuation">,</span>
                color<span class="token operator">=</span><span class="token string">'skyblue'</span><span class="token punctuation">,</span>
                font_family<span class="token operator">=</span><span class="token string">'Times New Roman'</span><span class="token punctuation">,</span>
            <span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token punctuation">)</span><span class="token punctuation">,</span>
        yaxis_opts<span class="token operator">=</span>opts<span class="token punctuation">.</span>AxisOpts<span class="token punctuation">(</span>
            axislabel_opts<span class="token operator">=</span>opts<span class="token punctuation">.</span>LabelOpts<span class="token punctuation">(</span>
                color<span class="token operator">=</span><span class="token string">'skyblue'</span><span class="token punctuation">,</span>
            <span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token comment">#显示工具栏</span>
        <span class="token comment">#toolbox_opts=opts.ToolboxOpts(is_show=True),</span>
    <span class="token punctuation">)</span>
    <span class="token comment">#.render('豆瓣电影TOP250上映年份分布.html')</span>
<span class="token punctuation">)</span>
bar<span class="token punctuation">.</span>render_notebook<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><div class="language- extra-class"><pre class="language-text"><code>d:\Python\python\lib\site-packages\pyecharts\charts\chart.py:14: PendingDeprecationWarning: pyecharts 所有图表类型将在 v1.9.0 版本开始强制使用 ChartItem 进行数据项配置 :)  super().__init__(init_opts=init_opts)
</code></pre></div><p><strong>简单总结：</strong></p> <p>1.先用split以/分隔数据输出为列表格式，strip去掉空格，replace去掉特殊数据，仔细观察数据，其实我们应该手动调整一下这个特殊数据，要不然处理太麻烦，不要过度追求完美。csv第51行数据，也可以去豆瓣top上去看。</p> <p>2.新构建year列，并对其分组进行计数统计构建count列，这是pandas里面的特殊格式，自己可以type()一下 3.重置索引，默认排序(升序)，具体方法自行百度，我能力有限</p> <h3 id="_3-豆瓣电影评分计数-这也是个柱形图-可以自行尝试一下-举一反三"><a href="#_3-豆瓣电影评分计数-这也是个柱形图-可以自行尝试一下-举一反三" class="header-anchor">#</a> 3.豆瓣电影评分计数，这也是个柱形图，可以自行尝试一下，举一反三</h3> <p>[6]</p> <div class="language-python extra-class"><pre class="language-python"><code>plase_s <span class="token operator">=</span> df<span class="token punctuation">.</span>groupby<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'score'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token string">'score'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>agg<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'count'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
plase_s<span class="token punctuation">.</span>reset_index<span class="token punctuation">(</span>inplace<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>
plase_s_last <span class="token operator">=</span> plase_s<span class="token punctuation">.</span>sort_index<span class="token punctuation">(</span><span class="token punctuation">)</span>
dom2 <span class="token operator">=</span> plase_s_last<span class="token punctuation">.</span>sort_values<span class="token punctuation">(</span><span class="token string">'score'</span><span class="token punctuation">,</span>ascending<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>
plase_s<span class="token punctuation">.</span>reset_index<span class="token punctuation">(</span>inplace<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>
plase_s_last <span class="token operator">=</span> plase_s<span class="token punctuation">.</span>sort_index<span class="token punctuation">(</span><span class="token punctuation">)</span>
dom2 <span class="token operator">=</span> plase_s_last<span class="token punctuation">.</span>sort_values<span class="token punctuation">(</span><span class="token string">'score'</span><span class="token punctuation">,</span>ascending<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>
x <span class="token operator">=</span> <span class="token builtin">list</span><span class="token punctuation">(</span>dom2<span class="token punctuation">[</span><span class="token string">'score'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
y <span class="token operator">=</span> <span class="token builtin">list</span><span class="token punctuation">(</span>dom2<span class="token punctuation">[</span><span class="token string">'count'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token comment">#制作柱形图</span>
bar2 <span class="token operator">=</span> <span class="token punctuation">(</span>
    Bar<span class="token punctuation">(</span>
        init_opts<span class="token operator">=</span>opts<span class="token punctuation">.</span>InitOpts<span class="token punctuation">(</span>theme<span class="token operator">=</span>ThemeType<span class="token punctuation">.</span>MACARONS<span class="token punctuation">,</span>width<span class="token operator">=</span><span class="token string">&quot;600px&quot;</span><span class="token punctuation">,</span>height<span class="token operator">=</span><span class="token string">&quot;400px&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">)</span>
    <span class="token punctuation">.</span>add_xaxis<span class="token punctuation">(</span>x<span class="token punctuation">)</span>
    <span class="token punctuation">.</span>add_yaxis<span class="token punctuation">(</span><span class="token string">&quot;豆瓣电影TOP250评分统计&quot;</span><span class="token punctuation">,</span>y<span class="token punctuation">)</span>
    <span class="token punctuation">.</span>set_global_opts<span class="token punctuation">(</span>
        title_opts<span class="token operator">=</span>opts<span class="token punctuation">.</span>TitleOpts<span class="token punctuation">(</span>title<span class="token operator">=</span><span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
                                  subtitle<span class="token operator">=</span><span class="token string">&quot;&quot;</span><span class="token punctuation">,</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        datazoom_opts<span class="token operator">=</span>opts<span class="token punctuation">.</span>DataZoomOpts<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token comment">#图例设置</span>
        legend_opts<span class="token operator">=</span>opts<span class="token punctuation">.</span>LegendOpts<span class="token punctuation">(</span>
            pos_left<span class="token operator">=</span><span class="token string">'center'</span><span class="token punctuation">,</span>    <span class="token comment"># 图例放置的位置，分上下左右，可用左右中表示，也可用百分比表示</span>
            pos_top<span class="token operator">=</span><span class="token string">'5%'</span><span class="token punctuation">,</span>
            orient<span class="token operator">=</span><span class="token string">'vertical'</span><span class="token punctuation">,</span>   <span class="token comment"># horizontal、vertical #图例放置的方式 横着放or竖着放</span>
            textstyle_opts<span class="token operator">=</span>opts<span class="token punctuation">.</span>TextStyleOpts<span class="token punctuation">(</span>
                font_size<span class="token operator">=</span><span class="token number">16</span><span class="token punctuation">,</span>
                <span class="token comment"># color='skyblue',</span>
                font_family<span class="token operator">=</span><span class="token string">'Times New Roman'</span><span class="token punctuation">,</span>
            <span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token punctuation">)</span><span class="token punctuation">,</span>
        yaxis_opts<span class="token operator">=</span>opts<span class="token punctuation">.</span>AxisOpts<span class="token punctuation">(</span>
            axislabel_opts<span class="token operator">=</span>opts<span class="token punctuation">.</span>LabelOpts<span class="token punctuation">(</span>
            <span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token comment"># #显示工具栏</span>
        <span class="token comment"># toolbox_opts=opts.ToolboxOpts(is_show=True),</span>
    <span class="token punctuation">)</span>
    <span class="token comment">#.render('豆瓣电影TOP250评分分布.html')</span>
<span class="token punctuation">)</span>
bar2<span class="token punctuation">.</span>render_notebook<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><div class="language- extra-class"><pre class="language-text"><code>d:\Python\python\lib\site-packages\pyecharts\charts\chart.py:14: PendingDeprecationWarning: pyecharts 所有图表类型将在 v1.9.0 版本开始强制使用 ChartItem 进行数据项配置 :)  super().__init__(init_opts=init_opts)
</code></pre></div><h3 id="_4-电影类型分布-树形图-这个有点小难"><a href="#_4-电影类型分布-树形图-这个有点小难" class="header-anchor">#</a> 4.电影类型分布---树形图，这个有点小难</h3> <p>[7]</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token comment">#制作树形图</span>
<span class="token punctuation">(</span>domt1<span class="token punctuation">,</span>domt2<span class="token punctuation">,</span>domt3<span class="token punctuation">,</span>domt4<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token keyword">for</span> i <span class="token keyword">in</span> df<span class="token punctuation">[</span><span class="token string">'info'</span><span class="token punctuation">]</span><span class="token punctuation">:</span>
    i <span class="token operator">=</span> i<span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">.</span>replace<span class="token punctuation">(</span><span class="token string">'\xa0'</span><span class="token punctuation">,</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">.</span>replace<span class="token punctuation">(</span><span class="token string">' 1978(中国大陆) '</span><span class="token punctuation">,</span><span class="token string">''</span><span class="token punctuation">)</span>
    domt1<span class="token punctuation">.</span>append<span class="token punctuation">(</span>i<span class="token punctuation">)</span>
count <span class="token operator">=</span> <span class="token number">0</span>
<span class="token keyword">for</span> j <span class="token keyword">in</span> domt1<span class="token punctuation">:</span>
    res <span class="token operator">=</span> j<span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token string">&quot; &quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">for</span> re <span class="token keyword">in</span> res<span class="token punctuation">:</span>
        <span class="token keyword">if</span> re <span class="token keyword">not</span> <span class="token keyword">in</span> domt2<span class="token punctuation">:</span>
            domt2<span class="token punctuation">.</span>append<span class="token punctuation">(</span>re<span class="token punctuation">)</span>
            count <span class="token operator">+=</span> <span class="token number">1</span>
        <span class="token keyword">else</span><span class="token punctuation">:</span>
            <span class="token keyword">pass</span>
<span class="token keyword">for</span> k <span class="token keyword">in</span> domt2<span class="token punctuation">:</span>
    num <span class="token operator">=</span> <span class="token number">0</span>
    <span class="token keyword">for</span> j <span class="token keyword">in</span> domt1<span class="token punctuation">:</span>
        res <span class="token operator">=</span> j<span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token string">' '</span><span class="token punctuation">)</span>
        <span class="token keyword">for</span> re <span class="token keyword">in</span> res<span class="token punctuation">:</span>
            <span class="token keyword">if</span> re <span class="token operator">==</span> k<span class="token punctuation">:</span>
                num <span class="token operator">+=</span> <span class="token number">1</span>
    domt3<span class="token punctuation">.</span>append<span class="token punctuation">(</span>num<span class="token punctuation">)</span>
<span class="token comment">#生成字典形式</span>
<span class="token keyword">def</span> <span class="token function">dict</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">for</span> p <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>domt2<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        data <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token comment">#把类型作为键，计数作为值</span>
        data<span class="token punctuation">[</span><span class="token string">'name'</span><span class="token punctuation">]</span> <span class="token operator">=</span> domt2<span class="token punctuation">[</span>p<span class="token punctuation">]</span>
        data<span class="token punctuation">[</span><span class="token string">'value'</span><span class="token punctuation">]</span> <span class="token operator">=</span> domt3<span class="token punctuation">[</span>p<span class="token punctuation">]</span>
        <span class="token keyword">yield</span> data
data <span class="token operator">=</span> <span class="token builtin">dict</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">for</span> item <span class="token keyword">in</span> data<span class="token punctuation">:</span>
    domt4<span class="token punctuation">.</span>append<span class="token punctuation">(</span>item<span class="token punctuation">)</span>
<span class="token comment">#树形图</span>
treemap <span class="token operator">=</span> <span class="token punctuation">(</span>
    TreeMap<span class="token punctuation">(</span>init_opts<span class="token operator">=</span>opts<span class="token punctuation">.</span>InitOpts<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment">#width=&quot;600px&quot;, height=&quot;400px&quot;</span>
    <span class="token punctuation">.</span>add<span class="token punctuation">(</span>
        series_name<span class="token operator">=</span><span class="token string">&quot;电影类型&quot;</span><span class="token punctuation">,</span>
        data<span class="token operator">=</span>domt4<span class="token punctuation">,</span>
        visual_min<span class="token operator">=</span><span class="token number">300</span><span class="token punctuation">,</span>
        leaf_depth<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">,</span>
        <span class="token comment"># 标签居中为 position = &quot;inside&quot;</span>
        label_opts<span class="token operator">=</span>opts<span class="token punctuation">.</span>LabelOpts<span class="token punctuation">(</span>position<span class="token operator">=</span><span class="token string">&quot;inside&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">)</span>
    <span class="token punctuation">.</span>set_global_opts<span class="token punctuation">(</span>
        legend_opts<span class="token operator">=</span>opts<span class="token punctuation">.</span>LegendOpts<span class="token punctuation">(</span>is_show<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        title_opts<span class="token operator">=</span>opts<span class="token punctuation">.</span>TitleOpts<span class="token punctuation">(</span>
            title<span class="token operator">=</span><span class="token string">&quot;&quot;</span><span class="token punctuation">,</span> subtitle<span class="token operator">=</span><span class="token string">&quot;2020/11&quot;</span><span class="token punctuation">,</span> pos_left<span class="token operator">=</span><span class="token string">&quot;leafDepth&quot;</span>
        <span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">)</span>
    <span class="token comment">#.render(&quot;豆瓣电影TOP250电影类型图.html&quot;)</span>
<span class="token punctuation">)</span>
treemap<span class="token punctuation">.</span>render_notebook<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><div class="language- extra-class"><pre class="language-text"><code>d:\Python\python\lib\site-packages\pyecharts\charts\chart.py:14: PendingDeprecationWarning: pyecharts 所有图表类型将在 v1.9.0 版本开始强制使用 ChartItem 进行数据项配置 :)  super().__init__(init_opts=init_opts)
</code></pre></div><p><strong>具体思路：</strong></p> <p>1.先分离数据到列表，再split对列表中的元素进行分离到列表</p> <p>2.domt2作为一个空列表，设置判断条件，匹配一致就添加，得到电影类型的类目</p> <p>3.再设置判断条件，这里的思维比较逆，大家可以先思维导图，能看懂以后看到能想到这种思维就ok了，对于我来说</p> <p>4.生成字典，主要是输出格式，这可能是做树形图的标准格式吧</p> <p>5.将数据导入列表，这一步跟之前照应了，要是列表做数据源才行哦</p> <h3 id="_5-中外电影年份计数分布对比-难度系数等同于树形图"><a href="#_5-中外电影年份计数分布对比-难度系数等同于树形图" class="header-anchor">#</a> 5.中外电影年份计数分布对比---难度系数等同于树形图</h3> <p>[8]</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token punctuation">(</span>c1<span class="token punctuation">,</span>c2<span class="token punctuation">,</span>c3<span class="token punctuation">,</span>c4<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token keyword">for</span> i <span class="token keyword">in</span> df<span class="token punctuation">[</span><span class="token string">'info'</span><span class="token punctuation">]</span><span class="token punctuation">:</span>
    country <span class="token operator">=</span> i<span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token string">&quot;/&quot;</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token string">' '</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>strip<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">if</span> country <span class="token keyword">in</span> <span class="token punctuation">[</span><span class="token string">'中国大陆'</span><span class="token punctuation">,</span> <span class="token string">'台湾'</span><span class="token punctuation">,</span> <span class="token string">'香港'</span><span class="token punctuation">]</span><span class="token punctuation">:</span>
        c1<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token string">'中国'</span><span class="token punctuation">)</span>
    <span class="token keyword">else</span><span class="token punctuation">:</span>
        c1<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token string">'外国'</span><span class="token punctuation">)</span>
df<span class="token punctuation">[</span><span class="token string">'country'</span><span class="token punctuation">]</span> <span class="token operator">=</span> c1
x_c <span class="token operator">=</span> <span class="token builtin">list</span><span class="token punctuation">(</span>dom1<span class="token punctuation">[</span><span class="token string">'year'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token comment">#year前面提取过了，就直接拿过来用</span>
<span class="token comment">#取索引为'中国'的行 # 对中国电影计数排序</span>
df_last <span class="token operator">=</span> df<span class="token punctuation">.</span>loc<span class="token punctuation">[</span>df<span class="token punctuation">[</span><span class="token string">'country'</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">'中国'</span><span class="token punctuation">]</span>
place <span class="token operator">=</span> df_last<span class="token punctuation">.</span>groupby<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'year'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token string">'year'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>agg<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'count'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token comment"># print(place)</span>
place<span class="token punctuation">.</span>reset_index<span class="token punctuation">(</span>inplace<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>
place_c_last <span class="token operator">=</span> place<span class="token punctuation">.</span>sort_index<span class="token punctuation">(</span><span class="token punctuation">)</span>
c3 <span class="token operator">=</span> place_c_last<span class="token punctuation">.</span>sort_values<span class="token punctuation">(</span><span class="token string">'year'</span><span class="token punctuation">,</span> ascending<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>
<span class="token comment"># 对外国电影计数排序</span>
df_last1 <span class="token operator">=</span> df<span class="token punctuation">.</span>loc<span class="token punctuation">[</span>df<span class="token punctuation">[</span><span class="token string">'country'</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">'外国'</span><span class="token punctuation">]</span>
place <span class="token operator">=</span> df_last1<span class="token punctuation">.</span>groupby<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'year'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token string">'year'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>agg<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'count'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token comment"># print(place)</span>
place<span class="token punctuation">.</span>reset_index<span class="token punctuation">(</span>inplace<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>
place_c_last <span class="token operator">=</span> place<span class="token punctuation">.</span>sort_index<span class="token punctuation">(</span><span class="token punctuation">)</span>
c4 <span class="token operator">=</span> place_c_last<span class="token punctuation">.</span>sort_values<span class="token punctuation">(</span><span class="token string">'year'</span><span class="token punctuation">,</span> ascending<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>
<span class="token punctuation">(</span>c5<span class="token punctuation">,</span>c6<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token keyword">for</span> j <span class="token keyword">in</span> x_c<span class="token punctuation">:</span>
    <span class="token keyword">for</span> x<span class="token punctuation">,</span> y <span class="token keyword">in</span> <span class="token builtin">zip</span><span class="token punctuation">(</span>c3<span class="token punctuation">[</span><span class="token string">'year'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> c3<span class="token punctuation">[</span><span class="token string">'count'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">if</span> x <span class="token operator">==</span> j<span class="token punctuation">:</span>
            aaa <span class="token operator">=</span> <span class="token builtin">int</span><span class="token punctuation">(</span>y<span class="token punctuation">)</span>
            <span class="token keyword">break</span>
        <span class="token keyword">else</span><span class="token punctuation">:</span>
            aaa <span class="token operator">=</span> <span class="token builtin">int</span><span class="token punctuation">(</span><span class="token string">'0'</span><span class="token punctuation">)</span>
            <span class="token keyword">continue</span>
    c5<span class="token punctuation">.</span>append<span class="token punctuation">(</span>aaa<span class="token punctuation">)</span>
<span class="token comment"># 外国电影纵坐标</span>
<span class="token keyword">for</span> j <span class="token keyword">in</span> x_c<span class="token punctuation">:</span>
    <span class="token keyword">for</span> x<span class="token punctuation">,</span> y <span class="token keyword">in</span> <span class="token builtin">zip</span><span class="token punctuation">(</span>c4<span class="token punctuation">[</span><span class="token string">'year'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> c4<span class="token punctuation">[</span><span class="token string">'count'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">if</span> x <span class="token operator">==</span> j<span class="token punctuation">:</span>
            aaa <span class="token operator">=</span> <span class="token builtin">int</span><span class="token punctuation">(</span>y<span class="token punctuation">)</span>
            <span class="token keyword">break</span>
        <span class="token keyword">else</span><span class="token punctuation">:</span>
            aaa <span class="token operator">=</span> <span class="token builtin">int</span><span class="token punctuation">(</span><span class="token string">'0'</span><span class="token punctuation">)</span>
            <span class="token keyword">continue</span>
    c6<span class="token punctuation">.</span>append<span class="token punctuation">(</span>aaa<span class="token punctuation">)</span>
<span class="token comment">#绘制折线图</span>
line <span class="token operator">=</span> <span class="token punctuation">(</span>
    Line<span class="token punctuation">(</span>
        init_opts<span class="token operator">=</span>opts<span class="token punctuation">.</span>InitOpts<span class="token punctuation">(</span>theme<span class="token operator">=</span>ThemeType<span class="token punctuation">.</span>DARK<span class="token punctuation">)</span>  <span class="token comment"># 设置主题 不知道如何添加宽高</span>
    <span class="token punctuation">)</span>
    <span class="token punctuation">.</span>add_xaxis<span class="token punctuation">(</span>x_c<span class="token punctuation">)</span>
    <span class="token punctuation">.</span>add_yaxis<span class="token punctuation">(</span><span class="token string">&quot;中国&quot;</span><span class="token punctuation">,</span>c5<span class="token punctuation">)</span>
    <span class="token punctuation">.</span>add_yaxis<span class="token punctuation">(</span><span class="token string">&quot;外国&quot;</span><span class="token punctuation">,</span>c6<span class="token punctuation">)</span>
        <span class="token comment">#.set_colors([&quot;orange&quot;])  # 柱子的颜色</span>
    <span class="token punctuation">.</span>set_series_opts<span class="token punctuation">(</span>label_opts<span class="token operator">=</span>opts<span class="token punctuation">.</span>LabelOpts<span class="token punctuation">(</span>is_show<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span>set_global_opts<span class="token punctuation">(</span>
        title_opts<span class="token operator">=</span>opts<span class="token punctuation">.</span>TitleOpts<span class="token punctuation">(</span>title<span class="token operator">=</span><span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>subtitle<span class="token operator">=</span><span class="token string">&quot;&quot;</span><span class="token punctuation">,</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        datazoom_opts<span class="token operator">=</span>opts<span class="token punctuation">.</span>DataZoomOpts<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token comment">#图例设置</span>
        legend_opts<span class="token operator">=</span>opts<span class="token punctuation">.</span>LegendOpts<span class="token punctuation">(</span>
            pos_left<span class="token operator">=</span><span class="token string">'center'</span><span class="token punctuation">,</span>    <span class="token comment"># 图例放置的位置，分上下左右，可用左右中表示，也可用百分比表示</span>
            pos_top<span class="token operator">=</span><span class="token string">'5%'</span><span class="token punctuation">,</span>
            orient<span class="token operator">=</span><span class="token string">'vertical'</span><span class="token punctuation">,</span>   <span class="token comment"># horizontal、vertical #图例放置的方式 横着放or竖着放</span>
            textstyle_opts<span class="token operator">=</span>opts<span class="token punctuation">.</span>TextStyleOpts<span class="token punctuation">(</span>
                font_size<span class="token operator">=</span><span class="token number">16</span><span class="token punctuation">,</span>
                <span class="token comment"># color='skyblue',</span>
                font_family<span class="token operator">=</span><span class="token string">'Times New Roman'</span><span class="token punctuation">,</span>
            <span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token punctuation">)</span><span class="token punctuation">,</span>
        yaxis_opts<span class="token operator">=</span>opts<span class="token punctuation">.</span>AxisOpts<span class="token punctuation">(</span>
        <span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token comment">#显示工具栏</span>
        <span class="token comment"># toolbox_opts=opts.ToolboxOpts(is_show=True),</span>
    <span class="token punctuation">)</span>
    <span class="token comment">#.render('豆瓣电影TOP250中外上映年份分布.html')</span>
<span class="token punctuation">)</span>
line<span class="token punctuation">.</span>render_notebook<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><div class="language- extra-class"><pre class="language-text"><code>d:\Python\python\lib\site-packages\pyecharts\charts\chart.py:14: PendingDeprecationWarning: pyecharts 所有图表类型将在 v1.9.0 版本开始强制使用 ChartItem 进行数据项配置 :)  super().__init__(init_opts=init_opts)
</code></pre></div><p>**具体思路：**交给你们补充了，偷下懒！写于<span style="color:deeppink;">2020-11-24-星期二</span></p> <h3 id="_6-中外电影评分情况"><a href="#_6-中外电影评分情况" class="header-anchor">#</a> 6.中外电影评分情况</h3> <p>[9]</p> <div class="language-python extra-class"><pre class="language-python"><code>x_axis <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'中国'</span><span class="token punctuation">,</span> <span class="token string">'外国'</span><span class="token punctuation">]</span>
y_axis <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token builtin">list</span><span class="token punctuation">(</span>df_last<span class="token punctuation">[</span><span class="token string">'score'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token builtin">list</span><span class="token punctuation">(</span>df_last1<span class="token punctuation">[</span><span class="token string">'score'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
<span class="token comment">#制作箱图</span>
boxplot <span class="token operator">=</span> Boxplot<span class="token punctuation">(</span>init_opts<span class="token operator">=</span>opts<span class="token punctuation">.</span>InitOpts<span class="token punctuation">(</span>theme<span class="token operator">=</span>ThemeType<span class="token punctuation">.</span>DARK<span class="token punctuation">,</span><span class="token punctuation">)</span><span class="token punctuation">)</span> 
<span class="token comment">#  # 设置主题 不知道如何添加宽高     </span>
boxplot <span class="token operator">=</span> <span class="token punctuation">(</span>
    boxplot<span class="token punctuation">.</span>add_xaxis<span class="token punctuation">(</span>x_axis<span class="token punctuation">)</span>
    <span class="token punctuation">.</span>add_yaxis<span class="token punctuation">(</span>series_name<span class="token operator">=</span><span class="token string">&quot;评分&quot;</span><span class="token punctuation">,</span> y_axis<span class="token operator">=</span>boxplot<span class="token punctuation">.</span>prepare_data<span class="token punctuation">(</span>y_axis<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span>set_global_opts<span class="token punctuation">(</span>
        title_opts<span class="token operator">=</span>opts<span class="token punctuation">.</span>TitleOpts<span class="token punctuation">(</span>title<span class="token operator">=</span><span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>subtitle<span class="token operator">=</span><span class="token string">&quot;&quot;</span><span class="token punctuation">,</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token comment">#图例设置</span>
        legend_opts<span class="token operator">=</span>opts<span class="token punctuation">.</span>LegendOpts<span class="token punctuation">(</span>
            pos_left<span class="token operator">=</span><span class="token string">'center'</span><span class="token punctuation">,</span>    <span class="token comment"># 图例放置的位置，分上下左右，可用左右中表示，也可用百分比表示</span>
            pos_top<span class="token operator">=</span><span class="token string">'5%'</span><span class="token punctuation">,</span>
            orient<span class="token operator">=</span><span class="token string">'vertical'</span><span class="token punctuation">,</span>   <span class="token comment"># horizontal、vertical #图例放置的方式 横着放or竖着放</span>
            textstyle_opts<span class="token operator">=</span>opts<span class="token punctuation">.</span>TextStyleOpts<span class="token punctuation">(</span>
                font_size<span class="token operator">=</span><span class="token number">16</span><span class="token punctuation">,</span>
                color<span class="token operator">=</span><span class="token string">'white'</span><span class="token punctuation">,</span>
                font_family<span class="token operator">=</span><span class="token string">'Times New Roman'</span><span class="token punctuation">,</span>
            <span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token punctuation">)</span><span class="token punctuation">,</span>
        yaxis_opts<span class="token operator">=</span>opts<span class="token punctuation">.</span>AxisOpts<span class="token punctuation">(</span>
            max_<span class="token operator">=</span><span class="token number">10</span><span class="token punctuation">,</span>
            min_<span class="token operator">=</span><span class="token number">8</span><span class="token punctuation">,</span>
            type_<span class="token operator">=</span><span class="token string">&quot;value&quot;</span><span class="token punctuation">,</span>
            name<span class="token operator">=</span><span class="token string">&quot;评分&quot;</span><span class="token punctuation">,</span>
            name_gap<span class="token operator">=</span><span class="token number">5</span><span class="token punctuation">,</span>
        <span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token comment">#显示工具栏</span>
        <span class="token comment"># toolbox_opts=opts.ToolboxOpts(is_show=True),</span>
    <span class="token punctuation">)</span>
    <span class="token comment">#.render('豆瓣电影TOP250中外评分情况.html')</span>
<span class="token punctuation">)</span>
boxplot<span class="token punctuation">.</span>render_notebook<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><div class="language- extra-class"><pre class="language-text"><code>d:\Python\python\lib\site-packages\pyecharts\charts\chart.py:14: PendingDeprecationWarning: pyecharts 所有图表类型将在 v1.9.0 版本开始强制使用 ChartItem 进行数据项配置 :)  super().__init__(init_opts=init_opts)
</code></pre></div><p>**具体思路：**直接调用上一步写好的df_last，df_last1即可，可以自己调试</p> <h3 id="_7-条形图-国家-地区电影数top10"><a href="#_7-条形图-国家-地区电影数top10" class="header-anchor">#</a> 7.条形图---国家-地区电影数TOP10</h3> <p>[10]</p> <div class="language-python extra-class"><pre class="language-python"><code>doms <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token comment"># 生成电影国家列表</span>
<span class="token keyword">for</span> i <span class="token keyword">in</span> df<span class="token punctuation">[</span><span class="token string">'info'</span><span class="token punctuation">]</span><span class="token punctuation">:</span>
    country <span class="token operator">=</span> i<span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token string">' '</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>strip<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>country<span class="token punctuation">)</span>
    doms<span class="token punctuation">.</span>append<span class="token punctuation">(</span>country<span class="token punctuation">)</span>
df<span class="token punctuation">[</span><span class="token string">'country'</span><span class="token punctuation">]</span> <span class="token operator">=</span> doms
<span class="token comment"># 计数排序</span>
place_message <span class="token operator">=</span> df<span class="token punctuation">.</span>groupby<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'country'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
place_com <span class="token operator">=</span> place_message<span class="token punctuation">[</span><span class="token string">'country'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>agg<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'count'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>place_com<span class="token punctuation">)</span>
place_com<span class="token punctuation">.</span>reset_index<span class="token punctuation">(</span>inplace<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>
place_com_last <span class="token operator">=</span> place_com<span class="token punctuation">.</span>sort_index<span class="token punctuation">(</span><span class="token punctuation">)</span>
doms2 <span class="token operator">=</span> place_com_last<span class="token punctuation">.</span>sort_values<span class="token punctuation">(</span><span class="token string">'count'</span><span class="token punctuation">,</span> ascending<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">:</span><span class="token number">10</span><span class="token punctuation">]</span>
<span class="token comment"># print(doms2)</span>
<span class="token comment"># 生成柱状图</span>
attr <span class="token operator">=</span> <span class="token builtin">list</span><span class="token punctuation">(</span>doms2<span class="token punctuation">[</span><span class="token string">'country'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
v1 <span class="token operator">=</span> <span class="token builtin">list</span><span class="token punctuation">(</span>doms2<span class="token punctuation">[</span><span class="token string">'count'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
attr<span class="token punctuation">.</span>reverse<span class="token punctuation">(</span><span class="token punctuation">)</span>
v1<span class="token punctuation">.</span>reverse<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>attr<span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>v1<span class="token punctuation">)</span>
bar3 <span class="token operator">=</span> <span class="token punctuation">(</span>
    Bar<span class="token punctuation">(</span>
        init_opts<span class="token operator">=</span>opts<span class="token punctuation">.</span>InitOpts<span class="token punctuation">(</span>theme<span class="token operator">=</span>ThemeType<span class="token punctuation">.</span>WONDERLAND<span class="token punctuation">,</span><span class="token punctuation">)</span>  <span class="token comment"># 设置主题 不知道如何添加宽高 写到里面去即可</span>
    <span class="token punctuation">)</span>
    <span class="token punctuation">.</span>add_xaxis<span class="token punctuation">(</span>attr<span class="token punctuation">)</span>
    <span class="token punctuation">.</span>add_yaxis<span class="token punctuation">(</span><span class="token string">&quot;count&quot;</span><span class="token punctuation">,</span>v1<span class="token punctuation">)</span>
    <span class="token punctuation">.</span>reversal_axis<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span>set_series_opts<span class="token punctuation">(</span>label_opts<span class="token operator">=</span>opts<span class="token punctuation">.</span>LabelOpts<span class="token punctuation">(</span>position<span class="token operator">=</span><span class="token string">&quot;right&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token comment">#.set_colors([&quot;orange&quot;])  # 柱子的颜色</span>
    <span class="token punctuation">.</span>set_global_opts<span class="token punctuation">(</span>
        title_opts<span class="token operator">=</span>opts<span class="token punctuation">.</span>TitleOpts<span class="token punctuation">(</span>title<span class="token operator">=</span><span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>subtitle<span class="token operator">=</span><span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>pos_left<span class="token operator">=</span><span class="token string">&quot;center&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token comment">#图例设置</span>
        legend_opts<span class="token operator">=</span>opts<span class="token punctuation">.</span>LegendOpts<span class="token punctuation">(</span>
            pos_left<span class="token operator">=</span><span class="token string">'center'</span><span class="token punctuation">,</span>    <span class="token comment"># 图例放置的位置，分上下左右，可用左右中表示，也可用百分比表示</span>
            pos_top<span class="token operator">=</span><span class="token string">'middle'</span><span class="token punctuation">,</span>
            orient<span class="token operator">=</span><span class="token string">'vertical'</span><span class="token punctuation">,</span>   <span class="token comment"># horizontal、vertical #图例放置的方式 横着放or竖着放</span>
        <span class="token punctuation">)</span><span class="token punctuation">,</span>
         xaxis_opts<span class="token operator">=</span>opts<span class="token punctuation">.</span>AxisOpts<span class="token punctuation">(</span>

<span class="token comment">#                 坐标轴标签的配置</span>
            axislabel_opts<span class="token operator">=</span>opts<span class="token punctuation">.</span>LabelOpts<span class="token punctuation">(</span>
                font_size<span class="token operator">=</span><span class="token number">12</span><span class="token punctuation">,</span>
                font_family<span class="token operator">=</span><span class="token string">'Times New Roman'</span><span class="token punctuation">,</span>
                <span class="token comment">#rotate=45</span>
            <span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token punctuation">)</span><span class="token punctuation">,</span>
        yaxis_opts<span class="token operator">=</span>opts<span class="token punctuation">.</span>AxisOpts<span class="token punctuation">(</span>
        <span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token comment">#显示工具栏</span>
        <span class="token comment">#toolbox_opts=opts.ToolboxOpts(is_show=True),</span>
    <span class="token punctuation">)</span>
    <span class="token comment">#.render('豆瓣电影TOP250-国家-地区电影数TOP10.html')</span>
<span class="token punctuation">)</span>
bar3<span class="token punctuation">.</span>render_notebook<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><div class="language- extra-class"><pre class="language-text"><code>美国 中国大陆 美国 法国 美国 意大利 日本 美国 美国 美国 意大利 美国 美国 印度 美国 法国 中国香港 韩国 美国 中国香港 美国 日本 美国 美国 法国 美国 美国 中国大陆 英国 美国 美国 黎巴嫩 美国 印度 美国 美国 美国 美国 ...         

count country                    1 中国台湾         6 中国大陆        15 中国香港        19 丹麦           1 伊朗           2 印度           4 巴西           1 德国           5 意大利          6 新西兰          1 日本          32 法国           8 泰国           1 澳大利亚         3 爱尔兰          1 瑞典           1 美国         112 英国          17 西班牙          1 阿根廷          1 韩国          11 黎巴嫩          1 

['德国', '中国台湾', '意大利', '法国', '韩国', '中国大陆', '英国', '中国香港', '日本', '美国'] [5, 6, 6, 8, 11, 15, 17, 19, 32, 112] 

d:\Python\python\lib\site-packages\pyecharts\charts\chart.py:14: PendingDeprecationWarning: pyecharts 所有图表类型将在 v1.9.0 版本开始强制使用 ChartItem 进行数据项配置 :)  super().__init__(init_opts=init_opts)
</code></pre></div><p>**注意事项：**柱形图添加reverse()就可以得到条形图了</p> <h3 id="_8-豆瓣电影top250评价人数分布"><a href="#_8-豆瓣电影top250评价人数分布" class="header-anchor">#</a> 8.豆瓣电影TOP250评价人数分布</h3> <p>[11]</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token punctuation">(</span>dom1<span class="token punctuation">,</span> dom2<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token comment"># 清洗数据,建立评价人数列</span>
<span class="token keyword">for</span> i <span class="token keyword">in</span> df<span class="token punctuation">[</span><span class="token string">'people'</span><span class="token punctuation">]</span><span class="token punctuation">:</span>
    dom1<span class="token punctuation">.</span>append<span class="token punctuation">(</span>i<span class="token punctuation">.</span>replace<span class="token punctuation">(</span><span class="token string">'人评价'</span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
df<span class="token punctuation">[</span><span class="token string">'people_last'</span><span class="token punctuation">]</span> <span class="token operator">=</span> dom1
<span class="token comment"># print(dom1)</span>
<span class="token comment"># print(df['people_last'])</span>
<span class="token comment"># 清洗数据,建立电影名称列(取第一个)</span>
<span class="token keyword">for</span> j <span class="token keyword">in</span> df<span class="token punctuation">[</span><span class="token string">'title'</span><span class="token punctuation">]</span><span class="token punctuation">:</span>
    dom2<span class="token punctuation">.</span>append<span class="token punctuation">(</span>j<span class="token punctuation">)</span>
df<span class="token punctuation">[</span><span class="token string">'title_last'</span><span class="token punctuation">]</span> <span class="token operator">=</span> dom2
<span class="token comment"># 切换为整型</span>
df<span class="token punctuation">[</span><span class="token string">&quot;people_last&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> df<span class="token punctuation">[</span><span class="token string">&quot;people_last&quot;</span><span class="token punctuation">]</span><span class="token punctuation">.</span>astype<span class="token punctuation">(</span><span class="token string">&quot;int&quot;</span><span class="token punctuation">)</span>
<span class="token comment"># 计数排序,取前10</span>
dom3 <span class="token operator">=</span> df<span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token string">'title_last'</span><span class="token punctuation">,</span> <span class="token string">'people_last'</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">.</span>sort_values<span class="token punctuation">(</span><span class="token string">'people_last'</span><span class="token punctuation">,</span> ascending<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">:</span><span class="token number">10</span><span class="token punctuation">]</span>
<span class="token comment"># 生成柱状图</span>
attr <span class="token operator">=</span> <span class="token builtin">list</span><span class="token punctuation">(</span>dom3<span class="token punctuation">[</span><span class="token string">&quot;title_last&quot;</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
v1 <span class="token operator">=</span> <span class="token builtin">list</span><span class="token punctuation">(</span>dom3<span class="token punctuation">[</span><span class="token string">'people_last'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
attr<span class="token punctuation">.</span>reverse<span class="token punctuation">(</span><span class="token punctuation">)</span>
v1<span class="token punctuation">.</span>reverse<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>attr<span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>v1<span class="token punctuation">)</span>
bar4 <span class="token operator">=</span> <span class="token punctuation">(</span>
    Bar<span class="token punctuation">(</span>
        init_opts<span class="token operator">=</span>opts<span class="token punctuation">.</span>InitOpts<span class="token punctuation">(</span>theme<span class="token operator">=</span>ThemeType<span class="token punctuation">.</span>WONDERLAND<span class="token punctuation">,</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment"># 设置主题 不知道如何添加宽高 写到里面去即可</span>
    <span class="token punctuation">.</span>add_xaxis<span class="token punctuation">(</span>attr<span class="token punctuation">)</span>
    <span class="token punctuation">.</span>add_yaxis<span class="token punctuation">(</span><span class="token string">&quot;2019年豆瓣电影TOP10评价人数统计&quot;</span><span class="token punctuation">,</span>v1<span class="token punctuation">)</span>
    <span class="token punctuation">.</span>reversal_axis<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span>set_series_opts<span class="token punctuation">(</span>label_opts<span class="token operator">=</span>opts<span class="token punctuation">.</span>LabelOpts<span class="token punctuation">(</span>position<span class="token operator">=</span><span class="token string">&quot;right&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span>set_global_opts<span class="token punctuation">(</span>
        title_opts<span class="token operator">=</span>opts<span class="token punctuation">.</span>TitleOpts<span class="token punctuation">(</span>title<span class="token operator">=</span><span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>subtitle<span class="token operator">=</span><span class="token string">&quot;&quot;</span><span class="token punctuation">,</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token comment">#图例设置</span>
        legend_opts<span class="token operator">=</span>opts<span class="token punctuation">.</span>LegendOpts<span class="token punctuation">(</span>
            pos_left<span class="token operator">=</span><span class="token string">'center'</span><span class="token punctuation">,</span>    <span class="token comment"># 图例放置的位置，分上下左右，可用左右中表示，也可用百分比表示</span>
            pos_top<span class="token operator">=</span><span class="token string">'bottom'</span><span class="token punctuation">,</span>
            orient<span class="token operator">=</span><span class="token string">'vertical'</span><span class="token punctuation">,</span>   <span class="token comment"># horizontal、vertical #图例放置的方式 横着放or竖着放</span>
            textstyle_opts<span class="token operator">=</span>opts<span class="token punctuation">.</span>TextStyleOpts<span class="token punctuation">(</span>
                font_size<span class="token operator">=</span><span class="token number">16</span><span class="token punctuation">,</span>
                <span class="token comment"># color='skyblue',</span>
                font_family<span class="token operator">=</span><span class="token string">'Times New Roman'</span><span class="token punctuation">,</span>
            <span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token punctuation">)</span><span class="token punctuation">,</span>
         xaxis_opts<span class="token operator">=</span>opts<span class="token punctuation">.</span>AxisOpts<span class="token punctuation">(</span>
<span class="token comment">#                 坐标轴标签的配置</span>
            axislabel_opts<span class="token operator">=</span>opts<span class="token punctuation">.</span>LabelOpts<span class="token punctuation">(</span>
                font_size<span class="token operator">=</span><span class="token number">12</span><span class="token punctuation">,</span>
                font_family<span class="token operator">=</span><span class="token string">'Times New Roman'</span><span class="token punctuation">,</span>
                <span class="token comment">#rotate=45</span>
            <span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token punctuation">)</span><span class="token punctuation">,</span>
        yaxis_opts<span class="token operator">=</span>opts<span class="token punctuation">.</span>AxisOpts<span class="token punctuation">(</span>
            axislabel_opts<span class="token operator">=</span>opts<span class="token punctuation">.</span>LabelOpts<span class="token punctuation">(</span>
                font_size<span class="token operator">=</span><span class="token number">12</span><span class="token punctuation">,</span>
                font_family<span class="token operator">=</span><span class="token string">'Times New Roman'</span><span class="token punctuation">,</span>
                <span class="token comment"># color='skyblue',</span>
            <span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token comment">#显示工具栏</span>
        <span class="token comment">#toolbox_opts=opts.ToolboxOpts(is_show=False),</span>
    <span class="token punctuation">)</span>
   <span class="token comment">#.render('豆瓣电影TOP250评价人数分布.html') </span>
<span class="token punctuation">)</span>
bar4<span class="token punctuation">.</span>render_notebook<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="_9-评分维度散点图"><a href="#_9-评分维度散点图" class="header-anchor">#</a> 9.评分维度散点图</h3> <p>[12]</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token punctuation">(</span>dom2<span class="token punctuation">,</span> dom3<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token comment"># 生成电影排名列表</span>
dom1 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&quot;{}&quot;</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span> <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">251</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
<span class="token comment"># 生成电影评分列表</span>
<span class="token keyword">for</span> i <span class="token keyword">in</span> df<span class="token punctuation">[</span><span class="token string">'score'</span><span class="token punctuation">]</span><span class="token punctuation">:</span>
    dom2<span class="token punctuation">.</span>append<span class="token punctuation">(</span>i<span class="token punctuation">)</span>
<span class="token comment"># 生成电影评价人数列表</span>
<span class="token keyword">for</span> i <span class="token keyword">in</span> df<span class="token punctuation">[</span><span class="token string">'people'</span><span class="token punctuation">]</span><span class="token punctuation">:</span>
    dom3<span class="token punctuation">.</span>append<span class="token punctuation">(</span>i<span class="token punctuation">.</span>replace<span class="token punctuation">(</span><span class="token string">'人评价'</span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment"># 生成数据列表</span>
data <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token builtin">list</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span> <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">zip</span><span class="token punctuation">(</span>dom1<span class="token punctuation">,</span> dom2<span class="token punctuation">,</span> dom3<span class="token punctuation">)</span><span class="token punctuation">]</span>
<span class="token comment"># 生成散点图</span>
x_lst <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">(</span>v<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token keyword">for</span> v <span class="token keyword">in</span> data<span class="token punctuation">]</span>
y_lst <span class="token operator">=</span> <span class="token punctuation">[</span>v<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token keyword">for</span> v <span class="token keyword">in</span> data<span class="token punctuation">]</span>
extra_data <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">(</span>v<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token keyword">for</span> v <span class="token keyword">in</span> data<span class="token punctuation">]</span>
<span class="token comment"># print(x_lst)</span>
<span class="token comment"># print(y_lst)</span>
<span class="token comment"># print(extra_data)</span>
sc <span class="token operator">=</span> <span class="token punctuation">(</span>
    Scatter<span class="token punctuation">(</span>
       init_opts<span class="token operator">=</span>opts<span class="token punctuation">.</span>InitOpts<span class="token punctuation">(</span>theme<span class="token operator">=</span>ThemeType<span class="token punctuation">.</span>WONDERLAND<span class="token punctuation">,</span><span class="token punctuation">)</span>  <span class="token comment"># 设置主题 不知道如何添加宽高 写到里面去即可</span>
    <span class="token punctuation">)</span>
    <span class="token punctuation">.</span>add_xaxis<span class="token punctuation">(</span>x_lst<span class="token punctuation">)</span>
    <span class="token punctuation">.</span>add_yaxis<span class="token punctuation">(</span><span class="token string">&quot;评分&quot;</span><span class="token punctuation">,</span>y_lst<span class="token punctuation">)</span>
    <span class="token comment">#.add_yaxis(&quot;评价人数&quot;,extra_data)</span>
    <span class="token punctuation">.</span>set_global_opts<span class="token punctuation">(</span>
        title_opts<span class="token operator">=</span>opts<span class="token punctuation">.</span>TitleOpts<span class="token punctuation">(</span>title<span class="token operator">=</span><span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
        subtitle<span class="token operator">=</span><span class="token string">&quot;&quot;</span><span class="token punctuation">,</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        visualmap_opts<span class="token operator">=</span>opts<span class="token punctuation">.</span>VisualMapOpts<span class="token punctuation">(</span>
            dimension <span class="token operator">=</span> extra_data<span class="token punctuation">,</span>
            is_show <span class="token operator">=</span> <span class="token boolean">True</span><span class="token punctuation">,</span>
            series_index <span class="token operator">=</span> <span class="token punctuation">[</span>x_lst<span class="token punctuation">,</span>extra_data<span class="token punctuation">]</span><span class="token punctuation">,</span>
            type_<span class="token operator">=</span><span class="token string">&quot;size&quot;</span><span class="token punctuation">,</span>
            min_<span class="token operator">=</span><span class="token builtin">min</span><span class="token punctuation">(</span>y_lst<span class="token punctuation">)</span><span class="token punctuation">,</span>
            max_<span class="token operator">=</span><span class="token builtin">max</span><span class="token punctuation">(</span>y_lst<span class="token punctuation">)</span><span class="token punctuation">,</span>
            range_text <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'High'</span><span class="token punctuation">,</span> <span class="token string">'Low'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
            orient <span class="token operator">=</span> <span class="token string">&quot;horizontal&quot;</span><span class="token punctuation">,</span>
        <span class="token punctuation">)</span><span class="token punctuation">,</span>
         xaxis_opts<span class="token operator">=</span>opts<span class="token punctuation">.</span>AxisOpts<span class="token punctuation">(</span>
             interval<span class="token operator">=</span> <span class="token builtin">max</span><span class="token punctuation">(</span>x_lst<span class="token punctuation">)</span><span class="token operator">-</span><span class="token builtin">min</span><span class="token punctuation">(</span>x_lst<span class="token punctuation">)</span><span class="token punctuation">,</span>  <span class="token comment"># Optional[Numeric]</span>
             grid_index<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span>  <span class="token comment"># Numeric</span>
             split_number<span class="token operator">=</span> <span class="token number">50</span><span class="token punctuation">,</span>  <span class="token comment"># Numeric</span>
            <span class="token comment">#  boundary_gap='',  # Union[str, bool, None]</span>
             
<span class="token comment">#                 坐标轴刻度配置项</span>
            axistick_opts<span class="token operator">=</span>opts<span class="token punctuation">.</span>AxisTickOpts<span class="token punctuation">(</span>
                is_show<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span>  <span class="token comment"># 是否显示</span>
                <span class="token comment"># is_inside=True,  # 刻度线是否在内侧</span>
                
            <span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token comment">#                 坐标轴线的配置</span>
            axisline_opts<span class="token operator">=</span>opts<span class="token punctuation">.</span>AxisLineOpts<span class="token punctuation">(</span>
                linestyle_opts<span class="token operator">=</span>opts<span class="token punctuation">.</span>LineStyleOpts<span class="token punctuation">(</span>
                    <span class="token comment"># width=50,</span>
                    <span class="token comment"># color='black',</span>
                <span class="token punctuation">)</span>
            <span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token punctuation">)</span><span class="token punctuation">,</span>
        yaxis_opts<span class="token operator">=</span>opts<span class="token punctuation">.</span>AxisOpts<span class="token punctuation">(</span>
            min_<span class="token operator">=</span> <span class="token number">8</span><span class="token punctuation">,</span>  <span class="token comment"># Union[Numeric, str, None]</span>
            max_<span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">,</span>  <span class="token comment"># Union[Numeric, str, None]</span>
            axistick_opts<span class="token operator">=</span>opts<span class="token punctuation">.</span>AxisTickOpts<span class="token punctuation">(</span>
                <span class="token comment"># is_show=False,  # 是否显示</span>
                <span class="token comment"># is_inside=True,  # 刻度线是否在内侧     </span>
            <span class="token punctuation">)</span><span class="token punctuation">,</span>
            axislabel_opts<span class="token operator">=</span>opts<span class="token punctuation">.</span>LabelOpts<span class="token punctuation">(</span>
                font_size<span class="token operator">=</span><span class="token number">16</span><span class="token punctuation">,</span>
                font_family<span class="token operator">=</span><span class="token string">'Times New Roman'</span><span class="token punctuation">,</span>
                color<span class="token operator">=</span><span class="token string">'skyblue'</span><span class="token punctuation">,</span>
            <span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token comment">#显示工具栏</span>
        <span class="token comment">#toolbox_opts=opts.ToolboxOpts(is_show=True),</span>
    <span class="token punctuation">)</span>
    <span class="token comment">#.render('豆瓣电影TOP250-排名评分人数三维度.html')</span>
<span class="token punctuation">)</span>
sc<span class="token punctuation">.</span>render_notebook<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><p>**说明：**这个图存在一点问题，功能没有完全实现，本来是三维散点图，但是现版本，我不知道如何画平面的三维散点图。上面是一个二维散点图，还可以进一步修改完善</p> <p><em><strong>最后，就是将这8个表整合到一起了。</strong></em> 通过学习pyecharts中文文档，我们可以得知</p> <p>overlap：用来实现在一个图表里面添加多种类型，如bar和line，并且设置元件可以有多个y轴(一般是固定x轴)</p> <p>grid：用来在一个盒子里装多个图表，是一个整体</p> <p>page：实现多个图表可以自由移动，并且都在同一个html里</p> <p>所以，这里我们使用<strong>Page方法</strong></p> <h3 id="_10-调用page方法"><a href="#_10-调用page方法" class="header-anchor">#</a> 10.调用Page方法</h3> <p>[13]</p> <div class="language-python extra-class"><pre class="language-python"><code>page <span class="token operator">=</span> Page<span class="token punctuation">(</span>layout<span class="token operator">=</span>Page<span class="token punctuation">.</span>DraggablePageLayout<span class="token punctuation">)</span>
page<span class="token punctuation">.</span>add<span class="token punctuation">(</span>
bar<span class="token punctuation">,</span>
bar2<span class="token punctuation">,</span>
bar3<span class="token punctuation">,</span>
bar4<span class="token punctuation">,</span>
line<span class="token punctuation">,</span>
sc<span class="token punctuation">,</span>
word1<span class="token punctuation">,</span>
treemap<span class="token punctuation">,</span>
boxplot
<span class="token punctuation">)</span>
page<span class="token punctuation">.</span>render_notebook<span class="token punctuation">(</span><span class="token punctuation">)</span>
page<span class="token punctuation">.</span>render<span class="token punctuation">(</span><span class="token string">'render.html'</span><span class="token punctuation">)</span>
<span class="token comment">#Page.save_resize_html('render.html',cfg_file='chart_config.json')</span>
</code></pre></div><p>**注意事项：**这里先注释掉最后一句，然后打开生成的render.html，下载chart_config.json到本地，然后再执行最后一句，会得到一个resize_render.html 二者有区别，大家可以试试</p> <p><strong>常见报错解决</strong></p> <p>UndefinedError: 'int object' has no attribute 'endswith' 这里是因为给图表设置width，height里面要给字符串，不能是int</p> <p>项目所有资源我都整理到这里了，请自行下载！</p> <p>下载链接：https://pan.baidu.com/s/10gBk44MpTimBYHaZ7D6jeQ
提取码：love
</p> <p>github地址：https://github.com/git123hub121/Python---TOP250.git</p> <h2 id="实现可视化效果"><a href="#实现可视化效果" class="header-anchor">#</a> 实现可视化效果</h2> <p>在网上找一个模板，放心，我给你了。</p> <p>对模板进行对应的添加，最好先把各图表的参数都调好，以免反复调试。具体就不多叙述了。</p> <h2 id="最终效果"><a href="#最终效果" class="header-anchor">#</a> 最终效果：</h2> <p><img src="https://img-blog.csdnimg.cn/20201125113838472.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ0NzYwOTEy,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"></p></div></article> <div class="main-div vssue"><!----></div></div></main> <aside class="aside" data-v-b3fda33c data-v-b3fda33c><div class="info-card main-div" data-v-1311ce9e data-v-b3fda33c><div class="info-card-header" style="background-size:cover;background-repeat:no-repeat;background-position:center;background-attachment:scroll;background-image:url(/lzmblog/me.png);" data-v-1311ce9e><img src="/lzmblog/logo.jpg" alt="lzmlovers" class="info-avatar" data-v-1311ce9e></div> <div class="info-card-body" data-v-1311ce9e><section class="info-name" data-v-1311ce9e>
      lzmlovers
    </section> <section class="info-desc" data-v-1311ce9e>Tomorrow will be better<br/>明天会更好</section> <section class="info-contact" data-v-1311ce9e><section data-v-1311ce9e><span data-v-1311ce9e data-v-1311ce9e><svg class="icon" style="font-size:1em;" data-v-1311ce9e data-v-1311ce9e><use xlink:href="#icon-location" data-v-1311ce9e data-v-1311ce9e></use></svg><span class="info-text" data-v-1311ce9e data-v-1311ce9e>
          YongZhou, China
        </span></span></section> <!----> <section data-v-1311ce9e><span data-v-1311ce9e data-v-1311ce9e><svg class="icon" style="font-size:1em;" data-v-1311ce9e data-v-1311ce9e><use xlink:href="#icon-email" data-v-1311ce9e data-v-1311ce9e></use></svg><span class="info-text" data-v-1311ce9e data-v-1311ce9e>
          2095793572@qq.com
        </span></span></section></section></div> <div class="info-card-footer" data-v-1311ce9e><p class="footer-sns-link" data-v-1311ce9e><a target="_blank" href="https://blog.csdn.net/qq_44760912" class="sns-link" data-v-1311ce9e><span class="sns-icon" data-v-1311ce9e data-v-1311ce9e><svg class="icon" style="font-size:35px;" data-v-1311ce9e data-v-1311ce9e><use xlink:href="#icon-csdn" data-v-1311ce9e data-v-1311ce9e></use></svg></span></a><a target="_blank" href="https://weibo.com/u/7747087955" class="sns-link" data-v-1311ce9e><span class="sns-icon" data-v-1311ce9e data-v-1311ce9e><svg class="icon" style="font-size:35px;" data-v-1311ce9e data-v-1311ce9e><use xlink:href="#icon-weibo" data-v-1311ce9e data-v-1311ce9e></use></svg></span></a><a target="_blank" href="https://www.zhihu.com/people/xiao-zhu-wen-wen-ti" class="sns-link" data-v-1311ce9e><span class="sns-icon" data-v-1311ce9e data-v-1311ce9e><svg class="icon" style="font-size:35px;" data-v-1311ce9e data-v-1311ce9e><use xlink:href="#icon-zhihu" data-v-1311ce9e data-v-1311ce9e></use></svg></span></a><a target="_blank" href="https://github.com/git123hub121" class="sns-link" data-v-1311ce9e><span class="sns-icon" data-v-1311ce9e data-v-1311ce9e><svg class="icon" style="font-size:35px;" data-v-1311ce9e data-v-1311ce9e><use xlink:href="#icon-github" data-v-1311ce9e data-v-1311ce9e></use></svg></span></a></p></div></div> <div class="post-toc main-div aside-toc" style="position:relative;top:0;width:0px;" data-v-b3fda33c><h4>- CATALOG</h4> <div class="post-nav-toc"><ul><li><a href="/lzmblog/posts/2020/11/25/%E8%B1%86%E7%93%A3top250%E7%88%AC%E8%99%AB-%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98-pyecharts.html#爬虫篇">爬虫篇</a></li><li><a href="/lzmblog/posts/2020/11/25/%E8%B1%86%E7%93%A3top250%E7%88%AC%E8%99%AB-%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98-pyecharts.html#数据分析篇">数据分析篇</a><ul><li><a href="/lzmblog/posts/2020/11/25/%E8%B1%86%E7%93%A3top250%E7%88%AC%E8%99%AB-%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98-pyecharts.html#_1-先导入所有模块">1.先导入所有模块</a></li><li><a href="/lzmblog/posts/2020/11/25/%E8%B1%86%E7%93%A3top250%E7%88%AC%E8%99%AB-%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98-pyecharts.html#接下来步入正题-先读取数据源douban-250-2-csv">接下来步入正题，先读取数据源douban2502.csv</a></li><li><a href="/lzmblog/posts/2020/11/25/%E8%B1%86%E7%93%A3top250%E7%88%AC%E8%99%AB-%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98-pyecharts.html#_2-先来一个柱状图-分析豆瓣电影top250的年份统计">2.先来一个柱状图  分析豆瓣电影top250的年份统计</a></li><li><a href="/lzmblog/posts/2020/11/25/%E8%B1%86%E7%93%A3top250%E7%88%AC%E8%99%AB-%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98-pyecharts.html#_3-豆瓣电影评分计数-这也是个柱形图-可以自行尝试一下-举一反三">3.豆瓣电影评分计数，这也是个柱形图，可以自行尝试一下，举一反三</a></li><li><a href="/lzmblog/posts/2020/11/25/%E8%B1%86%E7%93%A3top250%E7%88%AC%E8%99%AB-%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98-pyecharts.html#_4-电影类型分布-树形图-这个有点小难">4.电影类型分布---树形图，这个有点小难</a></li><li><a href="/lzmblog/posts/2020/11/25/%E8%B1%86%E7%93%A3top250%E7%88%AC%E8%99%AB-%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98-pyecharts.html#_5-中外电影年份计数分布对比-难度系数等同于树形图">5.中外电影年份计数分布对比---难度系数等同于树形图</a></li><li><a href="/lzmblog/posts/2020/11/25/%E8%B1%86%E7%93%A3top250%E7%88%AC%E8%99%AB-%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98-pyecharts.html#_6-中外电影评分情况">6.中外电影评分情况</a></li><li><a href="/lzmblog/posts/2020/11/25/%E8%B1%86%E7%93%A3top250%E7%88%AC%E8%99%AB-%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98-pyecharts.html#_7-条形图-国家-地区电影数top10">7.条形图---国家-地区电影数TOP10</a></li><li><a href="/lzmblog/posts/2020/11/25/%E8%B1%86%E7%93%A3top250%E7%88%AC%E8%99%AB-%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98-pyecharts.html#_8-豆瓣电影top250评价人数分布">8.豆瓣电影TOP250评价人数分布</a></li><li><a href="/lzmblog/posts/2020/11/25/%E8%B1%86%E7%93%A3top250%E7%88%AC%E8%99%AB-%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98-pyecharts.html#_9-评分维度散点图">9.评分维度散点图</a></li><li><a href="/lzmblog/posts/2020/11/25/%E8%B1%86%E7%93%A3top250%E7%88%AC%E8%99%AB-%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98-pyecharts.html#_10-调用page方法">10.调用Page方法</a></li></ul></li><li><a href="/lzmblog/posts/2020/11/25/%E8%B1%86%E7%93%A3top250%E7%88%AC%E8%99%AB-%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98-pyecharts.html#实现可视化效果">实现可视化效果</a></li><li><a href="/lzmblog/posts/2020/11/25/%E8%B1%86%E7%93%A3top250%E7%88%AC%E8%99%AB-%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98-pyecharts.html#最终效果">最终效果：</a></li></ul></div></div></aside></div> <footer class="footer" data-v-7f2e4136><p class="footer-sns-link"><a target="_blank" href="https://blog.csdn.net/qq_44760912" class="sns-link"><span class="sns-icon"><svg class="icon" style="font-size:40px;"><use xlink:href="#icon-csdn"></use></svg></span></a><a target="_blank" href="https://weibo.com/u/7747087955" class="sns-link"><span class="sns-icon"><svg class="icon" style="font-size:40px;"><use xlink:href="#icon-weibo"></use></svg></span></a><a target="_blank" href="https://www.zhihu.com/people/xiao-zhu-wen-wen-ti" class="sns-link"><span class="sns-icon"><svg class="icon" style="font-size:40px;"><use xlink:href="#icon-zhihu"></use></svg></span></a><a target="_blank" href="https://github.com/git123hub121" class="sns-link"><span class="sns-icon"><svg class="icon" style="font-size:40px;"><use xlink:href="#icon-github"></use></svg></span></a></p> <div class="copyright"><span id="custom">Copyright &copy; Lovers Blog 2022 | <a href="https://www.vuepress.cn/" target="_blank">VuePress</a></span> <iframe src="https://ghbtns.com/github-btn.html?user=youdeliang&amp;repo=vuepress-theme-melodydl&amp;type=star&amp;count=true" frameborder="0" scrolling="0" width="80px" height="20px" class="footer-btn" style="margin-left: 2px; margin-bottom:-5px;"></iframe></div></footer></div><div class="global-ui"><!----><!----><canvas id="vuepress-canvas-ribbon"></canvas><canvas id="vuepress-canvas-cursor"></canvas><div></div><div class="kanbanniang" data-v-5775ee02><div class="banniang-container" style="display:;" data-v-5775ee02><div class="messageBox" style="right:68px;bottom:190px;display:none;" data-v-5775ee02>
      欢迎来到 Lovers 的博客
    </div> <div class="operation" style="right:90px;bottom:40px;display:;" data-v-5775ee02><i class="kbnfont kbn-ban-home ban-home" data-v-5775ee02></i> <i class="kbnfont kbn-ban-message message" data-v-5775ee02></i> <i class="kbnfont kbn-ban-close close" data-v-5775ee02></i> <a target="_blank" href="https://vuepress-theme-reco.recoluan.com/views/plugins/kanbanniang.html" data-v-5775ee02><i class="kbnfont kbn-ban-info info" data-v-5775ee02></i></a> <i class="kbnfont kbn-ban-theme skin" style="display:;" data-v-5775ee02></i></div> <canvas id="banniang" width="150" height="220" class="live2d" style="right:90px;bottom:-20px;opacity:0.9;" data-v-5775ee02></canvas></div> <div class="showBanNiang" style="display:none;" data-v-5775ee02>
    看板娘
  </div></div><APlayer audio="" fixed="true" mini="true" theme="#b7daff" loop="loop" order="list" preload="auto" volume="0.7" mutex="true" lrc-type="0" list-max-height="250" storage-name="vuepress-plugin-meting" id="aplayer-fixed"></APlayer></div></div>
    <script src="/lzmblog/assets/js/app.f6582fa6.js" defer></script><script src="/lzmblog/assets/js/7.f579b280.js" defer></script><script src="/lzmblog/assets/js/23.38743dcf.js" defer></script>
  </body>
</html>
